/**
 * Copyright (c) 2026 The Nuevodevel Team. All rights reserved.
 * Videojs Captions Menu
 * Version 1.0.0
 */
!function(e,t){"function"==typeof define&&define.amd?define([],t.bind(this,e,e.videojs)):"undefined"!=typeof module&&module.exports?module.exports=t(e,e.videojs):t(e,e.videojs)}(window,function(e,d){e.videojs_filters={version:"1.0"};const t=(c,t)=>{var s=0,i=0,v=0,u=-1,p=0,n=!1;var a=Object.defineProperty({},"passive",{get:function(){return!0}}),h=(e.addEventListener("testPassive",null,a),e.removeEventListener("testPassive",null,a),(e,t,s)=>{e=document.createElement(e);return t&&(e.className=t),s&&(e.innerHTML=s),e}),a={filtersMenu:!0};let m=c.el();try{t=d.obj.merge(a,t)}catch(e){t=d.mergeOptions(a,t)}let j=d.dom.createEl("li",{className:"vjs-settings-item vjs-extend-sub vjs-menu-forward"},{tabIndex:0,"aria-label":c.localize("Open captions menu"),role:"menuitem","aria-disabled":"false"}),b=(j.innerHTML='<span><span class="vjs-captions-icon vjs-icon-placeholder" data-id="captions"  aria-hidden="true"></span></span>'+c.localize("Subtitles/CC"),h("label"));j.appendChild(b),b.innerHTML=c.localize("Off"),j.appendChild(b);a=m.querySelector(".vjs-settings-list");a&&(0<a.children.length?a.insertBefore(j,a.firstChild.nextSibling):(a.appendChild(j),d.dom.removeClass(m.querySelector(".vjs-cog-menu-button"),"vjs-hidden")));let f=h("div","vjs-submenu vjs-menu-captions vjs-menu-content");t=h("div","vjs-settings-back vjs-cc-head"),t.innerHTML='<span class="captions-back">'+c.localize("Subtitles/CC")+"</span>",a=h("span","cc-options");a.innerHTML=c.localize("Options"),!0!==d.browser.IS_IOS&&t.appendChild(a);let g=h("ul","vjs-menu-content vjs-sub-menu");f.appendChild(t),f.appendChild(g),m.querySelector(".vjs-settings-div").appendChild(f);t=t.querySelector(".captions-back");let o=m.querySelector(".vjs-text-track-settings");function L(e,t,s){var i=h("li","vjs-menu-item vjs-lang");return i.tabIndex=0,i.setAttribute("data-id",e),i.setAttribute("role","menuitemradio"),i.setAttribute("aria-label",s),i.innerHTML=t,i}function y(){var t=g.querySelectorAll("li");for(let e=0;e<t.length;e++)t[e].classList.remove("vjs-checked");for(let e=0;e<c.textTracks().length;e++){var s=c.textTracks()[e];"captions"!=s.kind&&"subtitles"!=s.kind||"hidden"===s.mode||(s.mode="disabled")}u=-1}a.onclick=a.ontouchend=e=>{o.classList.remove("vjs-hidden"),o.setAttribute("aria-hidden",!1),c.pause()},o.querySelector(".vjs-done-button").onclick=o.querySelector(".vjs-done-button").ontouchend=e=>{o.classList.add("vjs-hidden"),e.preventDefault(),e.stopImmediatePropagation(),c.play(),setTimeout(function(){o.setAttribute("aria-hidden",!0)},200)},t.onclick=t.ontouchend=e=>{e.preventDefault(),e.stopImmediatePropagation();m.querySelector(".vjs-settings-home").classList.remove("vjs-hidden"),f.classList.add("vjs-hidden");e=m.querySelector(".vjs-settings-div");e.style.width=s+"px",e.style.height=i+"px"},j.addEventListener("touchstart",e=>{n=!1},{passive:!0}),j.onclick=j.ontouchend=e=>{e.preventDefault(),e.stopImmediatePropagation(),n||(settingsHome=m.querySelector(".vjs-settings-home"),s=settingsHome.offsetWidth,i=settingsHome.offsetHeight,settingsHome.classList.add("vjs-hidden"),f.classList.remove("vjs-hidden"),(e=m.querySelector(".vjs-settings-div")).style.width="auto",e.style.height=v+"px")},j.addEventListener("touchmove",e=>{n=!0},{passive:!0}),c.on("loadedmetadata",function(){var e=m.querySelector(".vjs-cap-sub");e&&e.parentNode.removeChild(e)}),c.on("loadeddata",function(){c.one("playing",function(){setTimeout(function(){g.innerHTML="";let e=0,s="Captions";for(var i,n,a,o=m.querySelector(".vjs-cap-sub"),o=(o&&o.parentNode.removeChild(o),m.querySelector(".vjs-subs-caps-button")),t=0;t<c.textTracks().length;t++){var d,l=c.textTracks()[t];"captions"!=l.kind&&"subtitles"!=l.kind||"hidden"===l.mode||(d=L(-1,"Off","Subtitles/CC Off"),g.appendChild(d),d=L(t,l.label,l.label+" captions"),"showing"==l.mode&&(d.classList.add("vjs-checked"),b.innerHTML=l.label,p=u=t),"subtitles"==l.kind&&(s="Subtitles"),g.appendChild(d),e++)}if(0<e){if(m.querySelector(".vjs-menu-settings").classList.remove("vjs-hidden"),f.classList.remove("vjs-hidden"),f.offsetWidth,v=f.offsetHeight,f.classList.add("vjs-hidden"),f.querySelectorAll("li").forEach(s=>{var i=!1;s.addEventListener("touchstart",e=>{i=!1},{passive:!0}),s.onclick=s.ontouchend=e=>{var t;e.preventDefault(),e.stopImmediatePropagation(),!i&&(e=s,y(),e.classList.add("vjs-checked"),id=e.getAttribute("data-id"),b.innerHTML=c.localize("Off"),e=m.querySelector(".vjs-cap-sub"),-1<id?((t=c.textTracks()[id]).mode="showing",b.innerHTML=t.label,e&&e.classList.add("vjs-cap-active")):e&&e.classList.remove("vjs-cap-active"),-1<id&&(p=id),(t=m.querySelector(".vjs-menu-settings"))&&(t.classList.remove("vjs-lock-showing"),t.classList.add("vjs-hidden")),e=m.querySelector(".vjs-cog-menu-button"))&&e.classList.remove("vjs-cog-active")},s.addEventListener("touchmove",e=>{i=!0},{passive:!0})}),c.options_.ccButton){let t=h("button","vjs-control vjs-cap-sub vjs-button");t.type="button",t.setAttribute("aria-disabled",!1),c.controlBar.el_.insertBefore(t,o),t.innerHTML='<span class="vjs-icon-placeholder" aria-hidden="true" data-id="'+s.toLowerCase()+'"></span><span class="vjs-control-text" aria-live="polite">'+s+"</span>";var r=t.querySelector(".vjs-icon-placeholder");(r=r).getAttribute("data-id")&&(i=r.getAttribute("data-id").trim(),a="http://www.w3.org/2000/svg",(n=document.createElementNS(a,"svg")).setAttributeNS(null,"viewBox","0 0 32 32"),a=document.createElementNS(a,"use"),n.appendChild(a),a.setAttributeNS(null,"href","#vjs-icon-"+i),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","#vjs-icon-"+i),r.appendChild(n),r.classList.remove("vjs-icon-placeholder"),r.classList.add("vjs-svg-icon")),o&&o.classList.add("vjs-abs-hidden"),-1<u&&t.classList.add("vjs-cap-active"),t.onclick=()=>{var e=c.textTracks()[p];("showing"==e.mode?(b.innerHTML=c.localize("Off"),y(),t.classList.remove("vjs-cap-active"),document.querySelector('[data-id="-1"]')):(y(),e.mode="showing",b.innerHTML=e.label,t.classList.add("vjs-cap-active"),document.querySelector('[data-id="'+p+'"]'))).classList.add("vjs-checked")}}j.classList.remove("vjs-hidden")}else j.classList.add("vjs-hidden"),o&&o.classList.remove("vjs-abs-hidden")},200)})})};void 0!==e&&(d.registerPlugin,d.registerPlugin("ccsubmenu",function(e){this.on("menusReady",function(){t(this,e)})}))});
