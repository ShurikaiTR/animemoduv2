!function(e,t){"function"==typeof define&&define.amd?define([],t.bind(this,e,e.videojs)):"undefined"!=typeof module&&module.exports?module.exports=t(e,e.videojs):t(e,e.videojs)}(window,function(e,t){e.videojs_filters={version:"1.0"};var s=!1;var i=Object.defineProperty({},"passive",{get:function(){return s=!0,!0}});e.addEventListener("testPassive",null,i),e.removeEventListener("testPassive",null,i);var r=100,l=100,n=100;const o=(i,o)=>{const a={touchBrightness:!0};try{o=t.obj.merge(a,o)}catch(e){o=t.mergeOptions(a,o)}t.dom;let d=i.el();if(!0===o.touchBrightness){var v=t.dom.createEl("div",{className:"vjs-brightness"});return v.innerHTML='<div class="vjs-brightness-bar"><div class="bar"></div><div class="bar-level"></div></div>',d.appendChild(v),v.addEventListener("touchstart",function(s){s.stopImmediatePropagation(),t.dom.addClass(d,"vjs-touch-active"),f(s),e.addEventListener("touchmove",c,{passive:!1}),v.addEventListener("touchend",u)},!!s&&{passive:!0}),this}function c(e){e.preventDefault(),e.stopImmediatePropagation(),clearInterval(i.touchtimer),t.dom.addClass(d,"vjs-touch-acitve"),f(e)}function u(s){s.preventDefault(),i.touchtimer=setTimeout(function(){t.dom.removeClass(d,"vjs-touch-active")},1e3),e.removeEventListener("touchmove",c),v.removeEventListener("touchend",u)}function f(t){let s=null;if("mousemove"===t.type?s=t.pageY||null:"touchmove"===t.type&&(s=t.touches[0].pageY||null),null===s)return;var i=v.offsetHeight,o=s-(v.getBoundingClientRect().top+e.scrollY);o>i&&(o=i),o<0&&(o=0);var a=parseInt(100-o/i*100,10);a<0&&(a=0),a>100&&(a=100),v.querySelector(".bar-level").style.height=a+"%";let c=d.querySelector(".vjs-filters");if(c){let e=c.querySelector(".vjs-filter-brightness");e&&(e.querySelector(".vjs-filter-level").style.width=a+"%")}var u="";100!==(r=100+2*(a-50))&&(u="brightness("+r+"%)"),100!==l&&(""!==u&&(u+=" "),u+="saturate("+l+"%)"),100!==n&&(""!==u&&(u+=" "),u+="contrast("+n+"%)"),d.querySelector(".vjs-tech").style.webkitFilter=u,d.querySelector(".vjs-tech").style.filter=u}},a=function(i){this.ready(function(){o(this,i)}),this.on("menusReady",function(){((i,r)=>{const l={filtersMenu:!0};let n=100,o=100,a=100,d=i.el();try{r=t.obj.merge(l,r)}catch(e){r=t.mergeOptions(l,r)}if(r.filtersMenu){let r=t.dom.createEl("li",{className:"vjs-settings-item vjs-filters-button"},{tabIndex:0,"aria-label":i.localize("Open filters container"),role:"menuitem","aria-disabled":"false"},i.localize("Filters")),l=t.dom.createEl("span",{className:"vjs-filters-icon"});r.appendChild(l);let j=d.querySelector(".vjs-settings-list");j&&(j.children.length>0?j.insertBefore(r,j.firstChild.nextSibling):(j.appendChild(r),t.dom.removeClass(d.querySelector(".vjs-cog-menu-button"),"vjs-hidden")));let y=t.dom.createEl("div",{className:"vjs-filters vjs-hidden"},{"arira-label":i.localize("Video filters"),"aria-hidden":!0,tabindex:0});y.style.zIndex=7;let g=t.dom.createEl("div",{className:"vjs-filter-body vjs-filter-brightness"}),b=t.dom.createEl("div",{className:"vjs-filter-body vjs-filter-saturation"}),E=t.dom.createEl("div",{className:"vjs-filter-body vjs-filter-contrast"}),L='<div class="vjs-filter-bar"><div class="vjs-filter-level"></div><div class="filter-tip"></div></div>';g.innerHTML=L,b.innerHTML=L,E.innerHTML=L;let C=t.dom.createEl("button",{className:"filter-btn filter-close"},{tabindex:0,"aria-disabled":!1,"aria-label":i.localize("Close filters")},i.localize("Close")),S=t.dom.createEl("button",{className:"filter-btn filter-reset"},{tabindex:0,"aria-disabled":!1,"aria-label":i.localize("Reset filters")},i.localize("Reset"));y.appendChild(g),y.appendChild(b),y.appendChild(E),y.appendChild(C),y.appendChild(S),d.appendChild(y),r.onkeydown=function(e){setTimeout(function(){C.focus()},150)};var v=function(s){let i=w,r=i,l=null;if("mousemove"===s.type?l=s.pageX||null:"touchmove"===s.type&&(l=s.touches[0].pageX||null),null===l)return;var v=r.offsetWidth,c=l-(r.getBoundingClientRect().left+e.scrollX);c>v&&(c=v),c<0&&(c=0);var u=parseInt(c/v*100,10);u<0&&(u=0),u>100&&(u=100),i.querySelector(".vjs-filter-level").style.width=u+"%";let f=i.querySelector(".filter-tip");t.dom.addClass(f,"tip-show"),f.style.left=v*(u/100)-f.offsetWidth/2+"px";let m=d.querySelector(".vjs-brightness-bar");m&&(m.querySelector(".bar-level").style.height=u+"%");var h=100+2*(u-50);f.innerText=h;let p=d.querySelector(".vjs-tech");w===g&&(n=h),w===b&&(o=h),w===E&&(a=h);var j="";100!==n&&(j="brightness("+n+"%)"),100!==o&&(""!==j&&(j+=" "),j+="saturate("+o+"%)"),100!==a&&(""!==j&&(j+=" "),j+="contrast("+a+"%)"),p.style.webkitFilter=j,p.style.filter=j},c=function(e){e.preventDefault(),e.stopPropagation(),t.dom.addClass(y,"vjs-hidden"),y.setAttribute("aria-hidden","true"),i.$(".vjs-tech").style.removeProperty("pointer-events"),t.dom.removeClass(d,"vjs-filters-on")},u=function(e){e.preventDefault(),e.stopPropagation(),t.dom.removeClass(y,"vjs-hidden"),y.setAttribute("aria-hidden","false"),i.trigger("filters"),i.$(".vjs-tech").style.setProperty("pointer-events","none"),t.dom.addClass(d,"vjs-filters-on");let s=d.querySelector(".vjs-sharing-overlay"),r=d.querySelector(".vjs-grid");s&&t.dom.addClass(s,"vjs-hidden"),r&&t.dom.addClass(r,"vjs-hidden");let l=d.querySelector(".vjs-menu-settings");setTimeout(function(){t.dom.removeClass(l,"vjs-lock-showing"),t.dom.addClass(l,"vjs-hidden")},500)},f=function(e){e.preventDefault(),e.stopPropagation(),n=100,a=100,o=100,d.querySelector(".vjs-tech").removeAttribute("style"),g.querySelector(".vjs-filter-level").style.width="50%",b.querySelector(".vjs-filter-level").style.width="50%",E.querySelector(".vjs-filter-level").style.width="50%"},m=function(t){t.stopPropagation();let s=t.target;w=s,v(t),e.addEventListener("mousemove",h,!1),e.addEventListener("mouseup",p,!1),e.addEventListener("touchmove",h,{passive:!1}),w.addEventListener("touchend",p)},h=function(e){e.preventDefault(),v(e)},p=function(s){s.preventDefault(),t.dom.removeClass(d,"vjs-touch-active"),t.dom.removeClass(w.querySelector(".filter-tip"),"tip-show"),e.removeEventListener("mousemove",h),e.removeEventListener("mouseup",p),e.removeEventListener("touchmove",h),w.removeEventListener("touchend",p)};S.addEventListener("click",f,!1),S.addEventListener("touchend",f,!1),C.addEventListener("click",c,!1),C.addEventListener("touchend",c,!1);let q=d.querySelector(".vjs-filters-button");q.addEventListener("click",u,!1),q.addEventListener("touchstart",u,!!s&&{passive:!1});let w=null;g.addEventListener("mousedown",m,!1),g.addEventListener("touchstart",m,!!s&&{passive:!0}),b.addEventListener("mousedown",m,!1),b.addEventListener("touchstart",m,!!s&&{passive:!0}),E.addEventListener("mousedown",m,!1),E.addEventListener("touchstart",m,!!s&&{passive:!0})}})(this,i)})};if(void 0!==e&&e.videojs){t.registerPlugin||t.plugin;t.registerPlugin("filters",a)}});