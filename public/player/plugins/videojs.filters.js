/**
 * Copyright (c) 2025 The Nuevodevel Team. All rights reserved.
 * Transcript plugin for video.js
 * Version 2.0.0
 */
!function(e,t){"function"==typeof define&&define.amd?define([],t.bind(this,e,e.videojs)):"undefined"!=typeof module&&module.exports?module.exports=t(e,e.videojs):t(e,e.videojs)}(window,function(L,w){L.videojs_filters={version:"1.0"};const t=(t,i)=>{var s,r={touchBrightness:!0};try{i=w.obj.merge(r,i)}catch(e){i=w.mergeOptions(r,i)}w.dom;let a=t.el();if(!0===i.touchBrightness)return(s=w.dom.createEl("div",{className:"vjs-brightness"},{tabindex:0,"aria-live":"polite",role:"slider","aria-valuetext":"50%","aria-valuenow":50,"aria-valuemin":0,"aria-valuemax":100})).innerHTML='<span data-id="brightness" class="vjs-icon-placeholder"></span><div class="vjs-brightness-bar"><div class="bar"></div><div class="bar-level"></div></div>',a.appendChild(s),s.setAttribute("aria-label","Video brightness"),s.addEventListener("touchstart",function(e){e.stopImmediatePropagation(),w.dom.addClass(a,"vjs-touch-active"),o(e),L.addEventListener("touchmove",l,{passive:!1}),s.addEventListener("touchend",n)},!!supportsPassive&&{passive:!0}),this;function l(e){e.preventDefault(),e.stopImmediatePropagation(),clearInterval(t.touchtimer),w.dom.addClass(a,"vjs-touch-acitve"),o(e)}function n(e){e.preventDefault(),t.touchtimer=setTimeout(function(){w.dom.removeClass(a,"vjs-touch-active")},1e3),L.removeEventListener("touchmove",l),s.removeEventListener("touchend",n)}function o(e){let t=null;var i;"mousemove"===e.type||"mousedown"===e.type?t=e.pageY||null:"touchmove"!==e.type&&"touchstart"!==e.type||(t=e.touches[0].pageY||null),null!==t&&(e=s.offsetHeight,i=s.getBoundingClientRect(),(i=e<(i=t-(i.top+L.scrollY))?e:i)<0&&(i=0),100<(i=(i=parseInt(100-i/e*100,10))<0?0:i)&&(i=100),s.querySelector(".bar-level").style.height=i+"%",s.setAttribute("aria-valuenow",i),s.setAttribute("aria-valuetext",i+"%"),(e=a.querySelector(".vjs-filters"))&&(e=e.querySelector(".vjs-filter-brightness"))&&(e.querySelector(".vjs-filter-level").style.width=i+"%",e.setAttribute("aria-valuenow",i),e.setAttribute("aria-valuetext",i+"%")),100!=(filter_b=100+2*(i-50))&&(filterss="brightness("+filter_b+"%)"),100!==filter_s&&(""!==filterss&&(filterss+=" "),filterss+="saturate("+filter_s+"%)"),100!==filter_c&&(""!==filterss&&(filterss+=" "),filterss+="contrast("+filter_c+"%)"),a.querySelector(".vjs-tech").style.webkitFilter=filterss,a.querySelector(".vjs-tech").style.filter=filterss)}};void 0!==L&&(w.registerPlugin,w.registerPlugin("filters",function(e){this.on("nuevoReady",function(){}),this.on("menusReady",function(){((u,i)=>{var e=!1,s=Object.defineProperty({},"passive",{get:function(){return e=!0}}),c=(L.addEventListener("testPassive",null,s),L.removeEventListener("testPassive",null,s),100),f=100,p=100,r=!1,s={filtersMenu:!0};let h=u.el();try{i=w.obj.merge(s,i)}catch(e){i=w.mergeOptions(s,i)}if(i.filtersMenu){s=w.dom.createEl("li",{className:"vjs-settings-item vjs-filters-button"},{tabIndex:0,"aria-label":u.localize("Open filters container"),role:"menuitem","aria-disabled":"false"}),i=(s.innerHTML='<span><span class="vjs-filters-icon vjs-icon-placeholder" data-id="filters" aria-hidden="true"></span></span>'+u.localize("Filters"),h.querySelector(".vjs-settings-list"));i&&(0<i.children.length?i.insertBefore(s,i.firstChild.nextSibling):(i.appendChild(s),w.dom.removeClass(h.querySelector(".vjs-cog-menu-button"),"vjs-hidden")));let a=w.dom.createEl("div",{className:"vjs-filters vjs-hidden"},{"aria-label":u.localize("Video filters"),"aria-hidden":!0}),l=(a.style.zIndex=7,w.dom.createEl("div",{className:"vjs-filter-body vjs-filter-brightness"},{tabindex:0,"aria-live":"polite",role:"slider","aria-valuetext":"50%","aria-valuenow":50,"aria-valuemin":0,"aria-valuemax":100})),n=(l.setAttribute("aria-label",u.localize("video brigtness")),w.dom.createEl("div",{className:"vjs-filter-body vjs-filter-saturation"},{tabindex:0,"aria-live":"polite",role:"slider","aria-valuetext":"50%","aria-valuenow":50,"aria-valuemin":0,"aria-valuemax":100})),o=(n.setAttribute("aria-label",u.localize("video saturation")),w.dom.createEl("div",{className:"vjs-filter-body vjs-filter-contrast"},{tabindex:0,"aria-live":"polite",role:"slider","aria-valuetext":"50%","aria-valuenow":50,"aria-valuemin":0,"aria-valuemax":100}));o.setAttribute("aria-label",u.localize("video contrast"));i='<div class="vjs-filter-bar"><div class="vjs-filter-level"></div><div class="filter-tip"></div></div>';l.innerHTML='<span aria-hidden="true" data-id="brightness" class="vjs-icon-placeholder"></span>'+i,n.innerHTML='<span aria-hidden="true" data-id="saturation" class="vjs-icon-placeholder"></span>'+i,o.innerHTML='<span aria-hidden="true" data-id="contrast" class="vjs-icon-placeholder"></span>'+i;let t=w.dom.createEl("button",{className:"filter-btn filter-close"},{tabindex:0,"aria-disabled":!1,"aria-label":u.localize("Close filters")},u.localize("Close")),d=w.dom.createEl("button",{className:"filter-btn filter-reset"},{tabindex:0,"aria-disabled":!1,"aria-label":u.localize("Reset filters")},u.localize("Reset"));function m(e){e.preventDefault(),e.stopPropagation(),u.el_.querySelector(".vjs-filters").classList.add("vjs-hidden"),u.$(".vjs-tech").style.removeProperty("pointer-events"),u.el_.classList.remove("vjs-filters-on"),setTimeout(function(){u.el_.focus(),e.preventDefault(),e.stopPropagation()},100),u.userActive(!1)}function b(e){e.preventDefault(),e.stopPropagation(),f=p=c=100,h.querySelector(".vjs-tech").removeAttribute("style"),l.querySelector(".vjs-filter-level").style.width="50%",n.querySelector(".vjs-filter-level").style.width="50%",o.querySelector(".vjs-filter-level").style.width="50%"}function y(e){e.stopPropagation();var t=e.target;v=t,j(e),L.addEventListener("mousemove",g,!1),L.addEventListener("mouseup",E,!1),L.addEventListener("touchmove",g,{passive:!1}),v.addEventListener("touchend",E)}a.appendChild(l),a.appendChild(n),a.appendChild(o),a.appendChild(d),a.appendChild(t),h.appendChild(a),a.addEventListener("keydown",function(e){var i=e.which;if(27===i&&t.click(),37===i||39===i){var s=document.activeElement;if(s===l||s===n||s===o){let e=s.querySelector(".vjs-filter-level"),t=parseInt(e.style.width);e.style.width||(t=50),39===i&&99<(t+=5)&&(t=100),37===i&&(t-=5)<0&&(t=0),e.style.width=t+"%";var r=100+2*(t-50),r=(s===l&&(c=r),s===n&&(f=r),s===o&&(p=r),""),s=(100!==c&&(r+="brightness("+c+"%)"),100!==f&&(""!==r&&(r+=" "),r+="saturate("+f+"%)"),100!==p&&(""!==r&&(r+=" "),r+="contrast("+p+"%)"),s.querySelector(".filter-tip").innerText=t,s.setAttribute("aria-valuetext",t+"%"),s.setAttribute("aria-valuenow",t),u.el_.querySelector(".vjs-tech"));s.style.webkitFilter=r,s.style.filter=r}}9===i&&(s=document.activeElement,t==s?(l.focus(),e.preventDefault()):s!==l&&s!==n&&s!==o&&s!==d&&e.preventDefault())}),s.onkeydown=function(e){setTimeout(function(){l.focus()},150)};var j=function(e){var t,i=v,s=i.querySelector(".vjs-filter-bar");let r=null;"mousemove"===e.type||"mousedown"===e.type?r=e.clientX||null:"touchmove"!==e.type&&"touchstart"!==e.type||(r=e.touches[0].pageX||null),null!==r&&(r=parseInt(r,10),e=s.getBoundingClientRect(),(e=(s=s.offsetWidth)<(e=r-(e.left-L.scrollX))?s:e)<0&&(e=0),100<(e=(e=parseInt(e/s*100,10))<0?0:e)&&(e=100),i.querySelector(".vjs-filter-level").style.width=e+"%",t=i.querySelector(".filter-tip"),w.dom.addClass(t,"tip-show"),t.style.left=s*(e/100)-t.offsetWidth/2+"px",(s=h.querySelector(".vjs-brightness-bar"))&&(s.querySelector(".bar-level").style.height=e+"%"),s=100+(vv=2*(e-50)),t.innerText=e,i.setAttribute("aria-valuetext",e+"%"),i.setAttribute("aria-valuenow",e),v===l&&(c=s),v===n&&(f=s),v===o&&(p=s),t=100!==c?"brightness("+c+"%)":"",100!==f&&(""!==t&&(t+=" "),t+="saturate("+f+"%)"),100!==p&&(""!==t&&(t+=" "),t+="contrast("+p+"%)"),(i=h.querySelector(".vjs-tech")).style.webkitFilter=a,i.style.filter=t)},g=function(e){e.preventDefault(),j(e)},E=function(e){e.preventDefault(),w.dom.removeClass(h,"vjs-touch-active"),w.dom.removeClass(v.querySelector(".filter-tip"),"tip-show"),L.removeEventListener("mousemove",g),L.removeEventListener("mouseup",E),L.removeEventListener("touchmove",g),v.removeEventListener("touchend",E)},i=(d.addEventListener("click",b,!1),d.addEventListener("touchend",b,!1),t.addEventListener("click",m,!1),t.addEventListener("touchend",m,!1),h.querySelector(".vjs-filters-button"));i.addEventListener("touchstart",function(){r=!1},{passive:!0}),i.addEventListener("touchmove",function(){r=!0},{passive:!0}),i.onclick=i.ontouchend=t=>{if(r)return t.cancelable&&t.preventDefault(),!1;t.preventDefault(),t.stopPropagation();{w.dom.removeClass(a,"vjs-hidden"),a.setAttribute("aria-hidden","false"),u.trigger("filters"),u.$(".vjs-tech").style.setProperty("pointer-events","none"),w.dom.addClass(h,"vjs-filters-on");var t=h.querySelector(".vjs-sharing-overlay"),i=h.querySelector(".vjs-grid");t&&w.dom.addClass(t,"vjs-hidden"),i&&w.dom.addClass(i,"vjs-hidden");let e=h.querySelector(".vjs-menu-settings");setTimeout(function(){w.dom.removeClass(e,"vjs-lock-showing"),w.dom.addClass(e,"vjs-hidden"),a.focus()},500)}};let v=null;l.addEventListener("mousedown",y,!1),l.addEventListener("touchstart",y,!!e&&{passive:!0}),n.addEventListener("mousedown",y,!1),n.addEventListener("touchstart",y,!!e&&{passive:!0}),o.addEventListener("mousedown",y,!1),o.addEventListener("touchstart",y,!!e&&{passive:!0})}})(this,e),t(this,e)})}))});
