const VAST=function(e){"use strict";function t(t,e){var i,n=Object.keys(t);return Object.getOwnPropertySymbols&&(i=Object.getOwnPropertySymbols(t),e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)),n}function r(n){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?t(Object(r),!0).forEach(function(e){var t,i;t=n,i=r[e=e],(e=h(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):t(Object(r)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(r,e))})}return n}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,h(n.key),n)}}function i(e,t,i){t&&n(e.prototype,t),i&&n(e,i),Object.defineProperty(e,"prototype",{writable:!1})}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function u(i){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=o(i),t=(e=n?(e=o(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!=typeof e&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}}function d(e){return function(e){if(Array.isArray(e))return p(e)}(e)||function(){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}()||function(e){var t;if(e)return"string"==typeof e?p(e,void 0):"Map"===(t="Object"===(t=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?p(e,void 0):void 0}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function h(e){e=function(e){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);t=t.call(e,"string");if("object"!=typeof t)return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e);return"symbol"==typeof e?e:String(e)}function m(e){e=0<arguments.length&&void 0!==e?e:{};return{id:e.id||null,adId:e.adId||null,sequence:e.sequence||null,apiFramework:e.apiFramework||null,universalAdIds:[],creativeExtensions:[]}}var D=["ADCATEGORIES","ADCOUNT","ADPLAYHEAD","ADSERVINGID","ADTYPE","APIFRAMEWORKS","APPBUNDLE","ASSETURI","BLOCKEDADCATEGORIES","BREAKMAXADLENGTH","BREAKMAXADS","BREAKMAXDURATION","BREAKMINADLENGTH","BREAKMINDURATION","BREAKPOSITION","CLICKPOS","CLICKTYPE","CLIENTUA","CONTENTID","CONTENTPLAYHEAD","CONTENTURI","DEVICEIP","DEVICEUA","DOMAIN","EXTENSIONS","GDPRCONSENT","IFA","IFATYPE","INVENTORYSTATE","LATLONG","LIMITADTRACKING","MEDIAMIME","MEDIAPLAYHEAD","OMIDPARTNER","PAGEURL","PLACEMENTTYPE","PLAYERCAPABILITIES","PLAYERSIZE","PLAYERSTATE","PODSEQUENCE","REGULATIONS","SERVERSIDE","SERVERUA","TRANSACTIONID","UNIVERSALADID","VASTVERSIONS","VERIFICATIONVENDORS"];function f(e){var t,i,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},a=[],o=y(e);for(t in!n.ERRORCODE||r.isCustomCode||/^[0-9]{3}$/.test(n.ERRORCODE)||(n.ERRORCODE=900),n.CACHEBUSTING=B(Math.round(1e8*Math.random())),n.TIMESTAMP=(new Date).toISOString(),n.RANDOM=n.random=n.CACHEBUSTING,n)n[t]=A(n[t]);for(i in o){var l=o[i];"string"==typeof l&&a.push(v(l,n))}return a}function v(e,t){var t=(e=g(e,t)).match(/[^[\]]+(?=])/g);return!t||0===(t=t.filter(function(e){return-1<D.indexOf(e)})).length?e:g(e,t=t.reduce(function(e,t){return e[t]=-1,e},{}))}function g(e,t){var i,n=e;for(i in t)var r=t[i],n=n.replace(new RegExp("(?:\\[|%%)(".concat(i,")(?:\\]|%%)"),"g"),r);return n}function y(e){return Array.isArray(e)?e.map(function(e){return e&&e.hasOwnProperty("url")?e.url:e}):e}function k(e){return/^(https?:\/\/|\/\/)/.test(e)}function T(e,t){for(var i=0;i<t.length;i++)if(b(t[i],e))return!0;return!1}function b(e,t){var i,n;return!(!e||!t)&&(i=Object.getOwnPropertyNames(e),n=Object.getOwnPropertyNames(t),i.length===n.length)&&e.id===t.id&&e.url===t.url}function A(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(e){return"%".concat(e.charCodeAt(0).toString(16))})}function B(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:8;return e.toString().padStart(t,"0")}var R={track:function(e,t,i){f(e,t,i).forEach(function(e){"undefined"!=typeof window&&null!==window&&((new Image).src=e)})},resolveURLTemplates:f,extractURLsFromTemplates:y,filterValidUrlTemplates:function(e){return Array.isArray(e)?e.filter(function(e){return k(e.hasOwnProperty("url")?e.url:e)}):k(e)},containsTemplateObject:T,isTemplateObjectEqual:b,encodeURIComponentRFC3986:A,replaceUrlMacros:v,isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},flatten:function i(e){return e.reduce(function(e,t){return e.concat(Array.isArray(t)?i(t):t)},[])},joinArrayOfUniqueTemplateObjs:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],e=Array.isArray(e)?e:[],t=Array.isArray(t)?t:[];return e.concat(t).reduce(function(e,t){return T(t,e)||e.push(t),e},[])},isValidTimeValue:function(e){return Number.isFinite(e)&&-2<=e},addLeadingZeros:B};function j(e){return-1!==["true","TRUE","True","1"].indexOf(e)}function V(e){var t,i;return null==e?-1:R.isNumeric(e)?parseInt(e):3!==(e=e.split(":")).length||(i=e[2].split("."),t=parseInt(i[0]),2===i.length&&(t+=parseFloat("0.".concat(i[1]))),i=parseInt(60*e[1]),e=parseInt(60*e[0]*60),isNaN(e))||isNaN(i)||isNaN(t)||3600<i||60<t?-1:e+i+t}var L={childByName:function(e,t){var i,n=e.childNodes;for(i in n){var r=n[i];if(r.nodeName===t)return r}},childrenByName:function(e,t){var i,n=[],r=e.childNodes;for(i in r){var a=r[i];a.nodeName===t&&n.push(a)}return n},resolveVastAdTagURI:function(e,t){var i;return t?0===e.indexOf("//")?(i=location.protocol,"".concat(i).concat(e)):-1===e.indexOf("://")?(i=t.slice(0,t.lastIndexOf("/")),"".concat(i,"/").concat(e)):e:e},parseBoolean:j,parseNodeText:function(e){return e&&(e.textContent||e.text||"").trim()},copyNodeAttribute:function(e,t,i){t=t.getAttribute(e);t&&i.setAttribute(e,t)},parseAttributes:function(e){for(var t=e.attributes,i={},n=0;n<t.length;n++)i[t[n].nodeName]=t[n].nodeValue;return i},parseDuration:V,splitVAST:function(i){var n=[],r=null;return i.forEach(function(e,t){if(e.sequence&&(e.sequence=parseInt(e.sequence,10)),1<e.sequence){t=i[t-1];if(t&&t.sequence===e.sequence-1)return void(r&&r.push(e));delete e.sequence}r=[e],n.push(r)}),n},assignAttributes:function(e,t){if(e)for(var i in e){var n,i=e[i];i.nodeName&&i.nodeValue&&t.hasOwnProperty(i.nodeName)&&(n=i.nodeValue,"boolean"==typeof t[i.nodeName]&&(n=j(n)),t[i.nodeName]=n)}},mergeWrapperAdData:function(e,n){e.errorURLTemplates=n.errorURLTemplates.concat(e.errorURLTemplates),e.impressionURLTemplates=n.impressionURLTemplates.concat(e.impressionURLTemplates),e.extensions=n.extensions.concat(e.extensions),0<n.viewableImpression.length&&(e.viewableImpression=[].concat(d(e.viewableImpression),d(n.viewableImpression))),e.followAdditionalWrappers=n.followAdditionalWrappers,e.allowMultipleAds=n.allowMultipleAds,e.fallbackOnNoAd=n.fallbackOnNoAd;var t=(n.creatives||[]).filter(function(e){return e&&"companion"===e.type}),r=t.reduce(function(t,e){return(e.variations||[]).forEach(function(e){(e.companionClickTrackingURLTemplates||[]).forEach(function(e){R.containsTemplateObject(e,t)||t.push(e)})}),t},[]),a=(e.creatives=t.concat(e.creatives),n.videoClickTrackingURLTemplates&&n.videoClickTrackingURLTemplates.length),o=n.videoCustomClickURLTemplates&&n.videoCustomClickURLTemplates.length;e.creatives.forEach(function(e){if(n.trackingEvents&&n.trackingEvents[e.type])for(var t in n.trackingEvents[e.type]){var i=n.trackingEvents[e.type][t];Array.isArray(e.trackingEvents[t])||(e.trackingEvents[t]=[]),e.trackingEvents[t]=e.trackingEvents[t].concat(i)}"linear"===e.type&&(a&&(e.videoClickTrackingURLTemplates=e.videoClickTrackingURLTemplates.concat(n.videoClickTrackingURLTemplates)),o&&(e.videoCustomClickURLTemplates=e.videoCustomClickURLTemplates.concat(n.videoCustomClickURLTemplates)),n.videoClickThroughURLTemplate)&&null==e.videoClickThroughURLTemplate&&(e.videoClickThroughURLTemplate=n.videoClickThroughURLTemplate),"companion"===e.type&&r.length&&(e.variations||[]).forEach(function(e){e.companionClickTrackingURLTemplates=R.joinArrayOfUniqueTemplateObjs(e.companionClickTrackingURLTemplates,r)})}),n.adVerifications&&(e.adVerifications=e.adVerifications.concat(n.adVerifications)),n.blockedAdCategories&&(e.blockedAdCategories=e.blockedAdCategories.concat(n.blockedAdCategories)),null!=(t=n.creatives)&&t.length&&(t=n.creatives.filter(function(e){var t;return(null==(t=e.icons)?void 0:t.length)&&!e.mediaFiles.length})).length&&(e.creatives=e.creatives.concat(t))}};function F(e,t){var n,o=function(e){e=m(0<arguments.length&&void 0!==e?e:{});return{id:e.id,adId:e.adId,sequence:e.sequence,apiFramework:e.apiFramework,type:"linear",duration:0,skipDelay:null,mediaFiles:[],mezzanine:null,interactiveCreativeFile:null,closedCaptionFiles:[],videoClickThroughURLTemplate:null,videoClickTrackingURLTemplates:[],videoCustomClickURLTemplates:[],adParameters:null,icons:[],trackingEvents:{}}}(t),t=(o.duration=L.parseDuration(L.parseNodeText(L.childByName(e,"Duration"))),e.getAttribute("skipoffset")),i=(null==t?o.skipDelay=null:"%"===t.charAt(t.length-1)&&-1!==o.duration?(i=parseInt(t,10),o.skipDelay=o.duration*(i/100)):o.skipDelay=L.parseDuration(t),L.childByName(e,"VideoClicks")),t=(i&&(t=L.childByName(i,"ClickThrough"),o.videoClickThroughURLTemplate=t?{id:t.getAttribute("id")||null,url:L.parseNodeText(t)}:null,L.childrenByName(i,"ClickTracking").forEach(function(e){o.videoClickTrackingURLTemplates.push({id:e.getAttribute("id")||null,url:L.parseNodeText(e)})}),L.childrenByName(i,"CustomClick").forEach(function(e){o.videoCustomClickURLTemplates.push({id:e.getAttribute("id")||null,url:L.parseNodeText(e)})})),L.childByName(e,"AdParameters")),i=(t&&(o.adParameters={value:L.parseNodeText(t),xmlEncoded:t.getAttribute("xmlEncoded")||null}),L.childrenByName(e,"TrackingEvents").forEach(function(e){L.childrenByName(e,"Tracking").forEach(function(e){var t=e.getAttribute("event"),i=L.parseNodeText(e);if(t&&i){if("progress"===t){if(!(n=e.getAttribute("offset")))return;t="%"===n.charAt(n.length-1)?"progress-".concat(n):"progress-".concat(Math.round(L.parseDuration(n)))}Array.isArray(o.trackingEvents[t])||(o.trackingEvents[t]=[]),o.trackingEvents[t].push(i)}})}),L.childrenByName(e,"MediaFiles").forEach(function(e){L.childrenByName(e,"MediaFile").forEach(function(e){var t,i;o.mediaFiles.push(((t={id:null,fileURL:null,fileSize:0,deliveryType:"progressive",mimeType:null,mediaType:null,codec:null,bitrate:0,minBitrate:0,maxBitrate:0,width:0,height:0,apiFramework:null,scalable:null,maintainAspectRatio:null}).id=(e=e).getAttribute("id"),t.fileURL=L.parseNodeText(e),t.deliveryType=e.getAttribute("delivery"),t.codec=e.getAttribute("codec"),t.mimeType=e.getAttribute("type"),t.mediaType=e.getAttribute("mediaType")||"2D",t.apiFramework=e.getAttribute("apiFramework"),t.fileSize=parseInt(e.getAttribute("fileSize")||0),t.bitrate=parseInt(e.getAttribute("bitrate")||0),t.minBitrate=parseInt(e.getAttribute("minBitrate")||0),t.maxBitrate=parseInt(e.getAttribute("maxBitrate")||0),t.width=parseInt(e.getAttribute("width")||0),t.height=parseInt(e.getAttribute("height")||0),(i=e.getAttribute("scalable"))&&"string"==typeof i&&(t.scalable=L.parseBoolean(i)),(i=e.getAttribute("maintainAspectRatio"))&&"string"==typeof i&&(t.maintainAspectRatio=L.parseBoolean(i)),t))});var t=L.childByName(e,"InteractiveCreativeFile"),t=(t&&(o.interactiveCreativeFile=(t=t,(a=function(e){e=0<arguments.length&&void 0!==e?e:{};return{type:e.type||null,apiFramework:e.apiFramework||null,variableDuration:L.parseBoolean(e.variableDuration),fileURL:null}}(L.parseAttributes(t))).fileURL=L.parseNodeText(t),a)),L.childByName(e,"ClosedCaptionFiles"));t&&L.childrenByName(t,"ClosedCaptionFile").forEach(function(e){var t=function(e){e=0<arguments.length&&void 0!==e?e:{};return{type:e.type||null,language:e.language||null,fileURL:null}}(L.parseAttributes(e));t.fileURL=L.parseNodeText(e),o.closedCaptionFiles.push(t)});var i,n,r,a=L.childByName(e,"Mezzanine"),t=(i=a,r=!(n={}),["delivery","type","width","height"].forEach(function(e){i&&i.getAttribute(e)?n[e]=i.getAttribute(e):r=!0}),r?null:n);t&&((e={id:null,fileURL:null,delivery:null,codec:null,type:null,width:0,height:0,fileSize:0,mediaType:"2D"}).id=a.getAttribute("id"),e.fileURL=L.parseNodeText(a),e.delivery=t.delivery,e.codec=a.getAttribute("codec"),e.type=t.type,e.width=parseInt(t.width,10),e.height=parseInt(t.height,10),e.fileSize=parseInt(a.getAttribute("fileSize"),10),e.mediaType=a.getAttribute("mediaType")||"2D",o.mezzanine=e)}),L.childByName(e,"Icons"));return i&&L.childrenByName(i,"Icon").forEach(function(e){var t,i;o.icons.push(((t={program:null,height:0,width:0,xPosition:0,yPosition:0,apiFramework:null,offset:null,duration:0,type:null,staticResource:null,htmlResource:null,iframeResource:null,pxratio:"1",iconClickThroughURLTemplate:null,iconClickTrackingURLTemplates:[],iconViewTrackingURLTemplate:null,iconClickFallbackImages:[]}).program=(e=e).getAttribute("program"),t.height=parseInt(e.getAttribute("height")||0),t.width=parseInt(e.getAttribute("width")||0),t.xPosition=(i=e.getAttribute("xPosition"),-1!==["left","right"].indexOf(i)?i:parseInt(i||0)),t.yPosition=(i=e.getAttribute("yPosition"),-1!==["top","bottom"].indexOf(i)?i:parseInt(i||0)),t.apiFramework=e.getAttribute("apiFramework"),t.pxratio=e.getAttribute("pxratio")||"1",t.offset=L.parseDuration(e.getAttribute("offset")),t.duration=L.parseDuration(e.getAttribute("duration")),L.childrenByName(e,"HTMLResource").forEach(function(e){t.type=e.getAttribute("creativeType")||"text/html",t.htmlResource=L.parseNodeText(e)}),L.childrenByName(e,"IFrameResource").forEach(function(e){t.type=e.getAttribute("creativeType")||0,t.iframeResource=L.parseNodeText(e)}),L.childrenByName(e,"StaticResource").forEach(function(e){t.type=e.getAttribute("creativeType")||0,t.staticResource=L.parseNodeText(e)}),(i=L.childByName(e,"IconClicks"))&&(t.iconClickThroughURLTemplate=L.parseNodeText(L.childByName(i,"IconClickThrough")),L.childrenByName(i,"IconClickTracking").forEach(function(e){t.iconClickTrackingURLTemplates.push({id:e.getAttribute("id")||null,url:L.parseNodeText(e)})}),i=L.childByName(i,"IconClickFallbackImages"))&&L.childrenByName(i,"IconClickFallbackImage").forEach(function(e){t.iconClickFallbackImages.push({url:L.parseNodeText(e)||null,width:e.getAttribute("width")||null,height:e.getAttribute("height")||null})}),t.iconViewTrackingURLTemplate=L.parseNodeText(L.childByName(e,"IconViewTracking")),t))}),o}function H(e){var t=[];return e.forEach(function(e){e=function e(t){if("#comment"===t.nodeName)return null;var i={name:null,value:null,attributes:{},children:[]},n=t.attributes,r=t.childNodes;if(i.name=t.nodeName,t.attributes)for(var a in n)n.hasOwnProperty(a)&&(a=n[a]).nodeName&&a.nodeValue&&(i.attributes[a.nodeName]=a.nodeValue);for(var o in r)r.hasOwnProperty(o)&&(o=e(r[o]))&&i.children.push(o);(0===i.children.length||1===i.children.length&&0<=["#cdata-section","#text"].indexOf(i.children[0].name))&&(""!==(t=L.parseNodeText(t))&&(i.value=t),i.children=[]);return null===(t=i).value&&0===Object.keys(t.attributes).length&&0===t.children.length?null:i}(e);e&&t.push(e)}),t}function q(e){var u=[];return e.forEach(function(e){var t,i,n,r,a={id:e.getAttribute("id")||null,adId:(l=e).getAttribute("AdID")||l.getAttribute("adID")||l.getAttribute("adId")||null,sequence:e.getAttribute("sequence")||null,apiFramework:e.getAttribute("apiFramework")||null},o=[],l=(L.childrenByName(e,"UniversalAdId").forEach(function(e){e={idRegistry:e.getAttribute("idRegistry")||"unknown",value:L.parseNodeText(e)};o.push(e)}),L.childByName(e,"CreativeExtensions"));for(i in l&&(t=H(L.childrenByName(l,"CreativeExtension"))),e.childNodes){var s=e.childNodes[i],c=void 0;switch(s.nodeName){case"Linear":c=F(s,a);break;case"NonLinearAds":c=function(e,t){var n=function(e){e=m(0<arguments.length&&void 0!==e?e:{});return{id:e.id,adId:e.adId,sequence:e.sequence,apiFramework:e.apiFramework,type:"nonlinear",variations:[],trackingEvents:{}}}(t);return L.childrenByName(e,"TrackingEvents").forEach(function(e){var t,i;L.childrenByName(e,"Tracking").forEach(function(e){t=e.getAttribute("event"),i=L.parseNodeText(e),t&&i&&(Array.isArray(n.trackingEvents[t])||(n.trackingEvents[t]=[]),n.trackingEvents[t].push(i))})}),L.childrenByName(e,"NonLinear").forEach(function(e){var t={id:null,width:0,height:0,expandedWidth:0,expandedHeight:0,scalable:!0,maintainAspectRatio:!0,minSuggestedDuration:0,apiFramework:"static",adType:"nonLinearAd",type:null,staticResource:null,htmlResource:null,iframeResource:null,nonlinearClickThroughURLTemplate:null,nonlinearClickTrackingURLTemplates:[],adParameters:null},i=(t.id=e.getAttribute("id")||null,t.width=e.getAttribute("width"),t.height=e.getAttribute("height"),t.expandedWidth=e.getAttribute("expandedWidth"),t.expandedHeight=e.getAttribute("expandedHeight"),t.scalable=L.parseBoolean(e.getAttribute("scalable")),t.maintainAspectRatio=L.parseBoolean(e.getAttribute("maintainAspectRatio")),t.minSuggestedDuration=L.parseDuration(e.getAttribute("minSuggestedDuration")),t.apiFramework=e.getAttribute("apiFramework"),L.childrenByName(e,"HTMLResource").forEach(function(e){t.type=e.getAttribute("creativeType")||"text/html",t.htmlResource=L.parseNodeText(e)}),L.childrenByName(e,"IFrameResource").forEach(function(e){t.type=e.getAttribute("creativeType")||0,t.iframeResource=L.parseNodeText(e)}),L.childrenByName(e,"StaticResource").forEach(function(e){t.type=e.getAttribute("creativeType")||0,t.staticResource=L.parseNodeText(e)}),L.childByName(e,"AdParameters"));i&&(t.adParameters={value:L.parseNodeText(i),xmlEncoded:i.getAttribute("xmlEncoded")||null}),t.nonlinearClickThroughURLTemplate=L.parseNodeText(L.childByName(e,"NonLinearClickThrough")),L.childrenByName(e,"NonLinearClickTracking").forEach(function(e){t.nonlinearClickTrackingURLTemplates.push({id:e.getAttribute("id")||null,url:L.parseNodeText(e)})}),n.variations.push(t)}),n}(s,a);break;case"CompanionAds":n=s,(r=function(e){e=m(0<arguments.length&&void 0!==e?e:{});return{id:e.id,adId:e.adId,sequence:e.sequence,apiFramework:e.apiFramework,type:"companion",required:null,variations:[]}}(r=a)).required=n.getAttribute("required")||null,r.variations=L.childrenByName(n,"Companion").map(function(e){var i=function(e){e=0<arguments.length&&void 0!==e?e:{};return{id:e.id||null,adType:"companionAd",width:e.width||0,height:e.height||0,assetWidth:e.assetWidth||null,assetHeight:e.assetHeight||null,expandedWidth:e.expandedWidth||null,expandedHeight:e.expandedHeight||null,apiFramework:e.apiFramework||null,adSlotId:e.adSlotId||null,pxratio:e.pxratio||"1",renderingMode:e.renderingMode||"default",staticResources:[],htmlResources:[],iframeResources:[],adParameters:null,altText:null,companionClickThroughURLTemplate:null,companionClickTrackingURLTemplates:[],trackingEvents:{}}}(L.parseAttributes(e)),t=(i.htmlResources=L.childrenByName(e,"HTMLResource").reduce(function(e,t){t=L.parseNodeText(t);return t?e.concat(t):e},[]),i.iframeResources=L.childrenByName(e,"IFrameResource").reduce(function(e,t){t=L.parseNodeText(t);return t?e.concat(t):e},[]),i.staticResources=L.childrenByName(e,"StaticResource").reduce(function(e,t){var i=L.parseNodeText(t);return i?e.concat({url:i,creativeType:t.getAttribute("creativeType")||null}):e},[]),i.altText=L.parseNodeText(L.childByName(e,"AltText"))||null,L.childByName(e,"TrackingEvents")),t=(t&&L.childrenByName(t,"Tracking").forEach(function(e){var t=e.getAttribute("event"),e=L.parseNodeText(e);t&&e&&(Array.isArray(i.trackingEvents[t])||(i.trackingEvents[t]=[]),i.trackingEvents[t].push(e))}),i.companionClickTrackingURLTemplates=L.childrenByName(e,"CompanionClickTracking").map(function(e){return{id:e.getAttribute("id")||null,url:L.parseNodeText(e)}}),i.companionClickThroughURLTemplate=L.parseNodeText(L.childByName(e,"CompanionClickThrough"))||null,L.childByName(e,"AdParameters"));return t&&(i.adParameters={value:L.parseNodeText(t),xmlEncoded:t.getAttribute("xmlEncoded")||null}),i}),c=r}c&&(o&&(c.universalAdIds=o),t&&(c.creativeExtensions=t),u.push(c))}}),u}var w={Wrapper:{subElements:["VASTAdTagURI","Impression"]},BlockedAdCategories:{attributes:["authority"]},InLine:{subElements:["AdSystem","AdTitle","Impression","AdServingId","Creatives"]},Category:{attributes:["authority"]},Pricing:{attributes:["model","currency"]},Verification:{oneOfinLineResources:["JavaScriptResource","ExecutableResource"],attributes:["vendor"]},UniversalAdId:{attributes:["idRegistry"]},JavaScriptResource:{attributes:["apiFramework","browserOptional"]},ExecutableResource:{attributes:["apiFramework","type"]},Tracking:{attributes:["event"]},Creatives:{subElements:["Creative"]},Creative:{subElements:["UniversalAdId"]},Linear:{subElements:["MediaFiles","Duration"]},MediaFiles:{subElements:["MediaFile"]},MediaFile:{attributes:["delivery","type","width","height"]},Mezzanine:{attributes:["delivery","type","width","height"]},NonLinear:{oneOfinLineResources:["StaticResource","IFrameResource","HTMLResource"],attributes:["width","height"]},Companion:{oneOfinLineResources:["StaticResource","IFrameResource","HTMLResource"],attributes:["width","height"]},StaticResource:{attributes:["creativeType"]},Icons:{subElements:["Icon"]},Icon:{oneOfinLineResources:["StaticResource","IFrameResource","HTMLResource"]}};function W(t,e){var i;w[t.nodeName]&&w[t.nodeName].attributes&&0<(i=w[t.nodeName].attributes.filter(function(e){return!t.getAttribute(e)})).length&&C({name:t.nodeName,parentName:t.parentNode.nodeName,attributes:i},e)}function _(t,e,i){var n,r=w[t.nodeName];!r||!i&&"Wrapper"!==t.nodeName||(r.subElements&&0<(n=r.subElements.filter(function(e){return!L.childByName(t,e)})).length&&C({name:t.nodeName,parentName:t.parentNode.nodeName,subElements:n},e),!i)||!r.oneOfinLineResources||r.oneOfinLineResources.some(function(e){return L.childByName(t,e)})||C({name:t.nodeName,parentName:t.parentNode.nodeName,oneOfResources:r.oneOfinLineResources},e)}function z(e){return e.children&&0!==e.children.length}function C(e,t){var i=e.name,n=e.parentName,r=e.attributes,a=e.subElements,e=e.oneOfResources,i="Element '".concat(i,"'");t("VAST-warning",{message:i+=r?" missing required attribute(s) '".concat(r.join(", "),"' "):a?" missing required sub element(s) '".concat(a.join(", "),"' "):e?" must provide one of the following '".concat(e.join(", "),"' "):" is empty",parentElement:n,specVersion:4.1})}var X={verifyRequiredValues:function e(t,i,n){if(t&&t.nodeName)if("InLine"===t.nodeName&&(n=!0),W(t,i),z(t)){_(t,i,n);for(var r=0;r<t.children.length;r++)e(t.children[r],i,n)}else 0===L.parseNodeText(t).length&&C({name:t.nodeName,parentName:t.parentNode.nodeName},i)},hasSubElements:z,emitMissingValueWarning:C,verifyRequiredAttributes:W,verifyRequiredSubElements:_};function Q(e,t,i){var n,i=2<arguments.length&&void 0!==i?i:{},r=i.allowMultipleAds,a=i.followAdditionalWrappers,o=e.childNodes;for(n in o){var l=o[n];if(-1!==["Wrapper","InLine"].indexOf(l.nodeName)&&("Wrapper"!==l.nodeName||!1!==a)){if(L.copyNodeAttribute("id",e,l),L.copyNodeAttribute("sequence",e,l),L.copyNodeAttribute("adType",e,l),"Wrapper"===l.nodeName)return{ad:function(e,t){var n=Y(e,t),t=e.getAttribute("followAdditionalWrappers"),i=e.getAttribute("allowMultipleAds"),r=e.getAttribute("fallbackOnNoAd"),t=(n.followAdditionalWrappers=!t||L.parseBoolean(t),n.allowMultipleAds=!!i&&L.parseBoolean(i),n.fallbackOnNoAd=r?L.parseBoolean(r):null,L.childByName(e,"VASTAdTagURI"));if(t?n.nextWrapperURL=L.parseNodeText(t):(t=L.childByName(e,"VASTAdTagURL"))&&(n.nextWrapperURL=L.parseNodeText(L.childByName(t,"URL"))),n.creatives.forEach(function(i){if(-1!==["linear","nonlinear"].indexOf(i.type)){if(i.trackingEvents){n.trackingEvents||(n.trackingEvents={}),n.trackingEvents[i.type]||(n.trackingEvents[i.type]={});for(var e in i.trackingEvents)!function(t){var e=i.trackingEvents[t];Array.isArray(n.trackingEvents[i.type][t])||(n.trackingEvents[i.type][t]=[]),e.forEach(function(e){n.trackingEvents[i.type][t].push(e)})}(e)}i.videoClickTrackingURLTemplates&&(Array.isArray(n.videoClickTrackingURLTemplates)||(n.videoClickTrackingURLTemplates=[]),i.videoClickTrackingURLTemplates.forEach(function(e){n.videoClickTrackingURLTemplates.push(e)})),i.videoClickThroughURLTemplate&&(n.videoClickThroughURLTemplate=i.videoClickThroughURLTemplate),i.videoCustomClickURLTemplates&&(Array.isArray(n.videoCustomClickURLTemplates)||(n.videoCustomClickURLTemplates=[]),i.videoCustomClickURLTemplates.forEach(function(e){n.videoCustomClickURLTemplates.push(e)}))}}),n.nextWrapperURL)return n}(l,t),type:"WRAPPER"};if("InLine"===l.nodeName)return{ad:function(e,t){return!1===(2<arguments.length&&void 0!==arguments[2]?arguments[2]:{}).allowMultipleAds&&e.getAttribute("sequence")?null:Y(e,t)}(l,t,{allowMultipleAds:r}),type:"INLINE"}}}}function Y(e,t){var i=[];t&&X.verifyRequiredValues(e,t);var n,r,a=e.childNodes,o=function(e){e=0<arguments.length&&void 0!==e?e:{};return{id:e.id||null,sequence:e.sequence||null,adType:e.adType||null,adServingId:null,categories:[],expires:null,viewableImpression:[],system:null,title:null,description:null,advertiser:null,pricing:null,survey:null,errorURLTemplates:[],impressionURLTemplates:[],creatives:[],extensions:[],adVerifications:[],blockedAdCategories:[],followAdditionalWrappers:!0,allowMultipleAds:!1,fallbackOnNoAd:null}}(L.parseAttributes(e));for(r in a){var l=a[r];switch(l.nodeName){case"Error":o.errorURLTemplates.push(L.parseNodeText(l));break;case"Impression":o.impressionURLTemplates.push({id:l.getAttribute("id")||null,url:L.parseNodeText(l)});break;case"Creatives":o.creatives=q(L.childrenByName(l,"Creative"));break;case"Extensions":var s=L.childrenByName(l,"Extension");o.extensions=H(s),o.adVerifications.length||(i=function(e){var t=null,i=[];return e.some(function(e){return t=L.childByName(e,"AdVerifications")}),i=t?G(L.childrenByName(t,"Verification")):i}(s));break;case"AdVerifications":o.adVerifications=G(L.childrenByName(l,"Verification"));break;case"AdSystem":o.system={value:L.parseNodeText(l),version:l.getAttribute("version")||null};break;case"AdTitle":o.title=L.parseNodeText(l);break;case"AdServingId":o.adServingId=L.parseNodeText(l);break;case"Category":o.categories.push({authority:l.getAttribute("authority")||null,value:L.parseNodeText(l)});break;case"Expires":o.expires=parseInt(L.parseNodeText(l),10);break;case"ViewableImpression":o.viewableImpression.push((void 0,s=function(e,t){t=L.parseNodeText(t);return t&&e.push(t),e},{id:(n=l).getAttribute("id")||null,viewable:L.childrenByName(n,"Viewable").reduce(s,[]),notViewable:L.childrenByName(n,"NotViewable").reduce(s,[]),viewUndetermined:L.childrenByName(n,"ViewUndetermined").reduce(s,[])}));break;case"Description":o.description=L.parseNodeText(l);break;case"Advertiser":o.advertiser={id:l.getAttribute("id")||null,value:L.parseNodeText(l)};break;case"Pricing":o.pricing={value:L.parseNodeText(l),model:l.getAttribute("model")||null,currency:l.getAttribute("currency")||null};break;case"Survey":o.survey={value:L.parseNodeText(l),type:l.getAttribute("type")||null};break;case"BlockedAdCategories":o.blockedAdCategories.push({authority:l.getAttribute("authority")||null,value:L.parseNodeText(l)})}}return i.length&&(o.adVerifications=o.adVerifications.concat(i)),o}function G(e){var a=[];return e.forEach(function(e){var t,i={resource:null,vendor:null,browserOptional:!1,apiFramework:null,type:null,parameters:null,trackingEvents:{}},n=e.childNodes;for(t in L.assignAttributes(e.attributes,i),n){var r=n[t];switch(r.nodeName){case"JavaScriptResource":case"ExecutableResource":i.resource=L.parseNodeText(r),L.assignAttributes(r.attributes,i);break;case"VerificationParameters":i.parameters=L.parseNodeText(r)}}e=L.childByName(e,"TrackingEvents");e&&L.childrenByName(e,"Tracking").forEach(function(e){var t=e.getAttribute("event"),e=L.parseNodeText(e);t&&e&&(Array.isArray(i.trackingEvents[t])||(i.trackingEvents[t]=[]),i.trackingEvents[t].push(e))}),a.push(i)}),a}i(x,[{key:"on",value:function(e,t){if("function"!=typeof t)throw new TypeError("The handler argument must be of type Function. Received type ".concat(s(t)));if(e)return this._handlers.push({event:e,handler:t}),this;throw new TypeError("The event argument must be of type String. Received type ".concat(s(e)))}},{key:"once",value:function(e,t){return this.on(e,(n=this,r=e,a=t,(o={fired:!1,wrapFn:void 0}).wrapFn=i));function i(){o.fired||(n.off(r,o.wrapFn),o.fired=!0,a.bind(n).apply(void 0,arguments))}var n,r,a,o}},{key:"off",value:function(t,i){return this._handlers=this._handlers.filter(function(e){return e.event!==t||e.handler!==i}),this}},{key:"emit",value:function(t){for(var e=arguments.length,i=new Array(1<e?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];var r=!1;return this._handlers.forEach(function(e){"*"===e.event&&(r=!0,e.handler.apply(e,[t].concat(i))),e.event===t&&(r=!0,e.handler.apply(e,i))}),r}},{key:"removeAllListeners",value:function(t){return this._handlers=t?this._handlers.filter(function(e){return e.event!==t}):[],this}},{key:"listenerCount",value:function(t){return this._handlers.filter(function(e){return e.event===t}).length}},{key:"listeners",value:function(i){return this._handlers.reduce(function(e,t){return t.event===i&&e.push(t.handler),e},[])}},{key:"eventNames",value:function(){return this._handlers.map(function(e){return e.event})}}]);var E=x;function x(){c(this,x),this._handlers=[]}var $=function(e,t,i){i(new Error("Please bundle the library for node to use the node urlHandler"))};function K(){try{var e=new window.XMLHttpRequest;return"withCredentials"in e?e:null}catch(e){return null}}function I(e,t,i){var n=i?408:e.status,i=(i?"XHRURLHandler: Request timed out after ".concat(e.timeout," ms ("):"XHRURLHandler: ".concat(e.statusText," (")).concat(n,")");t(new Error(i),null,{statusCode:n})}function Z(e,t){!e||!t||e<=0||t<=0||(U=(U*re+8*e/t)/++re)}var J,ee,te=function(e,t,i){if("https:"===window.location.protocol&&0===e.indexOf("http://"))return i(new Error("XHRURLHandler: Cannot go from HTTPS to HTTP."));try{var n=K();n.open("GET",e),n.timeout=t.timeout||12e4,n.withCredentials=t.withCredentials||!1,n.overrideMimeType&&n.overrideMimeType("text/xml"),n.onload=function(){var e,t;t=i,200===(e=n).status?t(null,e.responseXML,{byteLength:e.response.length,statusCode:e.status}):I(e,t,!1)},n.onerror=function(){return I(n,i,!1)},n.onabort=function(){return I(n,i,!1)},n.ontimeout=function(){return I(n,i,!0)},n.send()}catch(e){i(new Error("XHRURLHandler: Unexpected error"))}},ie=function(){return!!K()},ne={get:function(e,t,i){return i||("function"==typeof t&&(i=t),t={}),"undefined"==typeof window||null===window?$(e,t,i):ie()?te(e,t,i):i(new Error("Current context is not supported by any of the default URLHandlers. Please provide a custom URLHandler"))}},re=0,U=0,ae={ERRORCODE:900,extensions:[]},oe=(a(O,E),ee=u(O),i(O,[{key:"addURLTemplateFilter",value:function(e){"function"==typeof e&&this.URLTemplateFilters.push(e)}},{key:"removeURLTemplateFilter",value:function(){this.URLTemplateFilters.pop()}},{key:"countURLTemplateFilters",value:function(){return this.URLTemplateFilters.length}},{key:"clearURLTemplateFilters",value:function(){this.URLTemplateFilters=[]}},{key:"trackVastError",value:function(e,t){for(var i=arguments.length,n=new Array(2<i?i-2:0),r=2;r<i;r++)n[r-2]=arguments[r];this.emit("VAST-error",Object.assign.apply(Object,[{},ae,t].concat(n))),R.track(e,t)}},{key:"getErrorURLTemplates",value:function(){return this.rootErrorURLTemplates.concat(this.errorURLTemplates)}},{key:"getEstimatedBitrate",value:function(){return U}},{key:"fetchVAST",value:function(s){var c=this,u=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,e=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return new Promise(function(a,o){c.URLTemplateFilters.forEach(function(e){s=e(s)});var l=Date.now();c.emit("VAST-resolving",{url:s,previousUrl:d,wrapperDepth:u,maxWrapperDepth:c.maxWrapperDepth,timeout:c.fetchingOptions.timeout,wrapperAd:e}),c.urlHandler.get(s,c.fetchingOptions,function(e,t){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},n=Math.round(Date.now()-l),r=Object.assign({url:s,previousUrl:d,wrapperDepth:u,error:e,duration:n},i);c.emit("VAST-resolved",r),Z(i.byteLength,n),e?o(e):a(t)})})}},{key:"initParsingStatus",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.errorURLTemplates=[],this.fetchingOptions={timeout:e.timeout||12e4,withCredentials:e.withCredentials},this.maxWrapperDepth=e.wrapperLimit||10,this.parsingOptions={allowMultipleAds:e.allowMultipleAds},this.remainingAds=[],this.rootErrorURLTemplates=[],this.rootURL="",this.urlHandler=e.urlHandler||e.urlhandler||ne,this.vastVersion=null,Z(e.byteLength,e.requestDuration)}},{key:"getRemainingAds",value:function(e){var t=this;return 0===this.remainingAds.length?Promise.reject(new Error("No more ads are available for the given VAST")):(e=e?R.flatten(this.remainingAds):this.remainingAds.shift(),this.errorURLTemplates=[],this.resolveAds(e,{wrapperDepth:0,url:this.rootURL}).then(function(e){return t.buildVASTResponse(e)}))}},{key:"getAndParseVAST",value:function(t){var i=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return this.initParsingStatus(n),this.URLTemplateFilters.forEach(function(e){t=e(t)}),this.rootURL=t,this.fetchVAST(t).then(function(e){return n.previousUrl=t,n.isRootVAST=!0,n.url=t,i.parse(e,n).then(function(e){return i.buildVASTResponse(e)})})}},{key:"parseVAST",value:function(e){var t=this,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return this.initParsingStatus(i),i.isRootVAST=!0,this.parse(e,i).then(function(e){return t.buildVASTResponse(e)})}},{key:"buildVASTResponse",value:function(e){e={ads:(e={ads:e,errorURLTemplates:this.getErrorURLTemplates(),version:this.vastVersion}).ads||[],errorURLTemplates:e.errorURLTemplates||[],version:e.version||null};return this.completeWrapperResolving(e),e}},{key:"parseVastXml",value:function(e,t){var i=t.isRootVAST,n=void 0!==i&&i,i=t.url,r=void 0===i?null:i,i=t.wrapperDepth,a=void 0===i?0:i,o=t.allowMultipleAds,l=t.followAdditionalWrappers;if(!e||!e.documentElement||"VAST"!==e.documentElement.nodeName)throw this.emit("VAST-ad-parsed",{type:"ERROR",url:r,wrapperDepth:a}),new Error("Invalid VAST XMLDocument");var s,c=[],u=e.documentElement.childNodes,d=e.documentElement.getAttribute("version");for(s in n&&d&&(this.vastVersion=d),u){var p=u[s];if("Error"===p.nodeName){var h=L.parseNodeText(p);(n?this.rootErrorURLTemplates:this.errorURLTemplates).push(h)}else if("Ad"===p.nodeName){if(this.vastVersion&&parseFloat(this.vastVersion)<3)o=!0;else if(!1===o&&1<c.length)break;h=Q(p,this.emit.bind(this),{allowMultipleAds:o,followAdditionalWrappers:l});h.ad?(c.push(h.ad),this.emit("VAST-ad-parsed",{type:h.type,url:r,wrapperDepth:a,adIndex:c.length-1,vastVersion:d})):this.trackVastError(this.getErrorURLTemplates(),{ERRORCODE:101})}}return c}},{key:"parse",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=t.url,i=void 0===i?null:i,n=t.resolveAll,n=void 0===n||n,r=t.wrapperSequence,r=void 0===r?null:r,a=t.previousUrl,a=void 0===a?null:a,o=t.wrapperDepth,o=void 0===o?0:o,l=t.isRootVAST,l=void 0!==l&&l,s=t.followAdditionalWrappers,t=t.allowMultipleAds,c=[];this.vastVersion&&parseFloat(this.vastVersion)<3&&l&&(t=!0);try{c=this.parseVastXml(e,{isRootVAST:l,url:i,wrapperDepth:o,allowMultipleAds:t,followAdditionalWrappers:s})}catch(e){return Promise.reject(e)}return 1===c.length&&null!=r&&(c[0].sequence=r),!1===n&&(this.remainingAds=L.splitVAST(c),c=this.remainingAds.shift()),this.resolveAds(c,{wrapperDepth:o,previousUrl:a,url:i})}},{key:"resolveAds",value:function(){var i=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length?arguments[1]:void 0,n=t.wrapperDepth,r=t.url,a=[],o=r;return e.forEach(function(e){e=i.resolveWrappers(e,n,o);a.push(e)}),Promise.all(a).then(function(e){var t,e=R.flatten(e);return!e&&0<i.remainingAds.length?(t=i.remainingAds.shift(),i.resolveAds(t,{wrapperDepth:n,previousUrl:o,url:r})):e})}},{key:"resolveWrappers",value:function(r,a,o){var l=this;return new Promise(function(t){var e;if(a++,!r.nextWrapperURL)return delete r.nextWrapperURL,t(r);if(a>=l.maxWrapperDepth)return r.errorCode=302,delete r.nextWrapperURL,t(r);r.nextWrapperURL=L.resolveVastAdTagURI(r.nextWrapperURL,o),l.URLTemplateFilters.forEach(function(e){r.nextWrapperURL=e(r.nextWrapperURL)});var i=null!=(e=l.parsingOptions.allowMultipleAds)?e:r.allowMultipleAds,n=r.sequence;l.fetchVAST(r.nextWrapperURL,a,o,r).then(function(e){return l.parse(e,{url:r.nextWrapperURL,previousUrl:o,wrapperSequence:n,wrapperDepth:a,followAdditionalWrappers:r.followAdditionalWrappers,allowMultipleAds:i}).then(function(e){if(delete r.nextWrapperURL,0===e.length)return r.creatives=[],t(r);e.forEach(function(e){e&&L.mergeWrapperAdData(e,r)}),t(e)})}).catch(function(e){r.errorCode=301,r.errorMessage=e.message,t(r)})})}},{key:"completeWrapperResolving",value:function(e){if(0===e.ads.length)this.trackVastError(e.errorURLTemplates,{ERRORCODE:303});else for(var t=e.ads.length-1;0<=t;t--){var i=e.ads[t];!i.errorCode&&0!==i.creatives.length||(this.trackVastError(i.errorURLTemplates.concat(e.errorURLTemplates),{ERRORCODE:i.errorCode||303},{ERRORMESSAGE:i.errorMessage||""},{extensions:i.extensions},{system:i.system}),e.ads.splice(t,1))}}}]),O),N=null,le={data:{},length:0,getItem:function(e){return this.data[e]},setItem:function(e,t){this.data[e]=t,this.length=Object.keys(this.data).length},removeItem:function(e){delete this.data[e],this.length=Object.keys(this.data).length},clear:function(){this.data={},this.length=0}},se=(i(M,[{key:"initStorage",value:function(){if(!N){try{N="undefined"!=typeof window&&null!==window?window.localStorage||window.sessionStorage:null}catch(e){N=null}N&&!this.isStorageDisabled(N)||(N=le).clear()}return N}},{key:"isStorageDisabled",value:function(e){var t="__VASTStorage__";try{if(e.setItem(t,t),e.getItem(t)!==t)return e.removeItem(t),!0}catch(e){return!0}return e.removeItem(t),!1}},{key:"getItem",value:function(e){return this.storage.getItem(e)}},{key:"setItem",value:function(e,t){return this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){return this.storage.removeItem(e)}},{key:"clear",value:function(){return this.storage.clear()}}]),M),ce=(i(P,[{key:"getParser",value:function(){return this.vastParser}},{key:"lastSuccessfulAd",get:function(){return this.storage.getItem("vast-client-last-successful-ad")},set:function(e){this.storage.setItem("vast-client-last-successful-ad",e)}},{key:"totalCalls",get:function(){return this.storage.getItem("vast-client-total-calls")},set:function(e){this.storage.setItem("vast-client-total-calls",e)}},{key:"totalCallsTimeout",get:function(){return this.storage.getItem("vast-client-total-calls-timeout")},set:function(e){this.storage.setItem("vast-client-total-calls-timeout",e)}},{key:"hasRemainingAds",value:function(){return 0<this.vastParser.remainingAds.length}},{key:"getNextAds",value:function(e){return this.vastParser.getRemainingAds(e)}},{key:"get",value:function(n){var r=this,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},o=Date.now();return(a=Object.assign({},this.defaultOptions,a)).hasOwnProperty("resolveAll")||(a.resolveAll=!1),this.totalCallsTimeout<o?(this.totalCalls=1,this.totalCallsTimeout=o+36e5):this.totalCalls++,new Promise(function(t,i){if(r.cappingFreeLunch>=r.totalCalls)return i(new Error("VAST call canceled â€“ FreeLunch capping not reached yet ".concat(r.totalCalls,"/").concat(r.cappingFreeLunch)));var e=o-r.lastSuccessfulAd;if(e<0)r.lastSuccessfulAd=0;else if(e<r.cappingMinimumTimeInterval)return i(new Error("VAST call canceled â€“ (".concat(r.cappingMinimumTimeInterval,")ms minimum interval reached")));r.vastParser.getAndParseVAST(n,a).then(function(e){return t(e)}).catch(function(e){return i(e)})})}}]),P),E=(a(S,E),J=u(S),i(S,[{key:"_initLinearTracking",value:function(){this.linear=!0,this.skipDelay=this.creative.skipDelay,this.setDuration(this.creative.duration),this.clickThroughURLTemplate=this.creative.videoClickThroughURLTemplate,this.clickTrackingURLTemplates=this.creative.videoClickTrackingURLTemplates}},{key:"_initVariationTracking",value:function(){if(this.linear=!1,this.skipDelay=-1,this.variation){for(var e in this.variation.trackingEvents){var t=this.variation.trackingEvents[e];this.trackingEvents[e]?this.trackingEvents[e]=this.trackingEvents[e].concat(t.slice(0)):this.trackingEvents[e]=t.slice(0)}"nonLinearAd"===this.variation.adType?(this.clickThroughURLTemplate=this.variation.nonlinearClickThroughURLTemplate,this.clickTrackingURLTemplates=this.variation.nonlinearClickTrackingURLTemplates,this.setDuration(this.variation.minSuggestedDuration)):"companionAd"===this.variation.adType&&(this.clickThroughURLTemplate=this.variation.companionClickThroughURLTemplate,this.clickTrackingURLTemplates=this.variation.companionClickTrackingURLTemplates)}}},{key:"setDuration",value:function(e){R.isValidTimeValue(e)&&(this.assetDuration=e,this.quartiles={firstQuartile:Math.round(25*this.assetDuration)/100,midpoint:Math.round(50*this.assetDuration)/100,thirdQuartile:Math.round(75*this.assetDuration)/100})}},{key:"setProgress",value:function(e){var t=this,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(R.isValidTimeValue(e)&&"object"===s(i)){var n=this.skipDelay||-1;if(-1===n||this.skippable||(e<n?this.emit("skip-countdown",n-e):(this.skippable=!0,this.emit("skip-countdown",0))),0<this.assetDuration){var r=Math.round(e/this.assetDuration*100),a=[];if(0<e){a.push("start");for(var o,l=this.lastPercentage;l<r;l++)a.push("progress-".concat(l+1,"%"));for(o in a.push("progress-".concat(Math.round(e))),this.quartiles)this.isQuartileReached(o,this.quartiles[o],e)&&(a.push(o),this._alreadyTriggeredQuartiles[o]=!0);this.lastPercentage=r}a.forEach(function(e){t.track(e,{macros:i,once:!0})}),e<this.progress&&this.track("rewind",{macros:i})}this.progress=e}}},{key:"isQuartileReached",value:function(e,t,i){var n=!1;return n=t<=i&&!this._alreadyTriggeredQuartiles[e]?!0:n}},{key:"setMuted",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};"boolean"==typeof e&&"object"===s(t)&&(this.muted!==e&&this.track(e?"mute":"unmute",{macros:t}),this.muted=e)}},{key:"setPaused",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};"boolean"==typeof e&&"object"===s(t)&&(this.paused!==e&&this.track(e?"pause":"resume",{macros:t}),this.paused=e)}},{key:"setFullscreen",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};"boolean"==typeof e&&"object"===s(t)&&(this.fullscreen!==e&&this.track(e?"fullscreen":"exitFullscreen",{macros:t}),this.fullscreen=e)}},{key:"setExpand",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};"boolean"==typeof e&&"object"===s(t)&&(this.expanded!==e&&(this.track(e?"expand":"collapse",{macros:t}),this.track(e?"playerExpand":"playerCollapse",{macros:t})),this.expanded=e)}},{key:"setSkipDelay",value:function(e){R.isValidTimeValue(e)&&(this.skipDelay=e)}},{key:"trackImpression",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};"object"!==s(e)||this.impressed||(this.impressed=!0,this.trackURLs(this.ad.impressionURLTemplates,e),this.track("creativeView",{macros:e}))}},{key:"trackViewableImpression",value:function(){var t=this,i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};"object"===s(i)&&this.ad.viewableImpression.forEach(function(e){t.trackURLs(e.viewable,i)})}},{key:"trackNotViewableImpression",value:function(){var t=this,i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};"object"===s(i)&&this.ad.viewableImpression.forEach(function(e){t.trackURLs(e.notViewable,i)})}},{key:"trackUndeterminedImpression",value:function(){var t=this,i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};"object"===s(i)&&this.ad.viewableImpression.forEach(function(e){t.trackURLs(e.viewUndetermined,i)})}},{key:"error",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];"object"===s(e)&&"boolean"==typeof t&&this.trackURLs(this.ad.errorURLTemplates,e,{isCustomCode:t})}},{key:"errorWithCode",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];"string"==typeof e&&"boolean"==typeof t&&(this.error({ERRORCODE:e},t),console.log("The method errorWithCode is deprecated, please use vast tracker error method instead"))}},{key:"complete",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};"object"===s(e)&&this.track("complete",{macros:e})}},{key:"notUsed",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};"object"===s(e)&&(this.track("notUsed",{macros:e}),this.trackingEvents=[])}},{key:"otherAdInteraction",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};"object"===s(e)&&this.track("otherAdInteraction",{macros:e})}},{key:"acceptInvitation",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};"object"===s(e)&&this.track("acceptInvitation",{macros:e})}},{key:"adExpand",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};"object"===s(e)&&this.track("adExpand",{macros:e})}},{key:"adCollapse",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};"object"===s(e)&&this.track("adCollapse",{macros:e})}},{key:"minimize",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};"object"===s(e)&&this.track("minimize",{macros:e})}},{key:"verificationNotExecuted",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if("string"==typeof t&&"object"===s(e)){if(!this.ad||!this.ad.adVerifications||!this.ad.adVerifications.length)throw new Error("No adVerifications provided");if(!t)throw new Error("No vendor provided, unable to find associated verificationNotExecuted");var i=this.ad.adVerifications.find(function(e){return e.vendor===t});if(!i)throw new Error("No associated verification element found for vendor: ".concat(t));var i=i.trackingEvents;i&&i.verificationNotExecuted&&(i=i.verificationNotExecuted,this.trackURLs(i,e),this.emit("verificationNotExecuted",{trackingURLTemplates:i}))}}},{key:"overlayViewDuration",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};"string"==typeof e&&"object"===s(t)&&(t.ADPLAYHEAD=e,this.track("overlayViewDuration",{macros:t}))}},{key:"close",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};"object"===s(e)&&this.track(this.linear?"closeLinear":"close",{macros:e})}},{key:"skip",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};"object"===s(e)&&this.track("skip",{macros:e})}},{key:"load",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};"object"===s(e)&&this.track("loaded",{macros:e})}},{key:"click",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};null!==e&&"string"!=typeof e||"object"!==s(t)||(this.clickTrackingURLTemplates&&this.clickTrackingURLTemplates.length&&this.trackURLs(this.clickTrackingURLTemplates,t),e=this.clickThroughURLTemplate||e,t=r({},t),e&&(this.progress&&(t.ADPLAYHEAD=this.progressFormatted()),e=R.resolveURLTemplates([e],t)[0],this.emit("clickthrough",e)))}},{key:"track",value:function(e){var t,i,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=n.macros,r=void 0===r?{}:r,n=n.once,n=void 0!==n&&n;"object"===s(r)&&("closeLinear"===e&&!this.trackingEvents[e]&&this.trackingEvents.close&&(e="close"),t=this.trackingEvents[e],i=-1<this.emitAlwaysEvents.indexOf(e),t?(this.emit(e,{trackingURLTemplates:t}),this.trackURLs(t,r)):i&&this.emit(e,null),n)&&(delete this.trackingEvents[e],i)&&this.emitAlwaysEvents.splice(this.emitAlwaysEvents.indexOf(e),1)}},{key:"trackURLs",value:function(e){var t,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},e=R.filterValidUrlTemplates(e),i=r({},i);this.linear&&(this.creative&&this.creative.mediaFiles&&this.creative.mediaFiles[0]&&this.creative.mediaFiles[0].fileURL&&(i.ASSETURI=this.creative.mediaFiles[0].fileURL),this.progress)&&(i.ADPLAYHEAD=this.progressFormatted()),null!=(t=this.creative)&&null!=(t=t.universalAdIds)&&t.length&&(i.UNIVERSALADID=this.creative.universalAdIds.map(function(e){return e.idRegistry.concat(" ",e.value)}).join(",")),this.ad&&(this.ad.sequence&&(i.PODSEQUENCE=this.ad.sequence),this.ad.adType&&(i.ADTYPE=this.ad.adType),this.ad.adServingId&&(i.ADSERVINGID=this.ad.adServingId),this.ad.categories&&this.ad.categories.length&&(i.ADCATEGORIES=this.ad.categories.map(function(e){return e.value}).join(",")),this.ad.blockedAdCategories)&&this.ad.blockedAdCategories.length&&(i.BLOCKEDADCATEGORIES=this.ad.blockedAdCategories),R.track(e,i,n)}},{key:"convertToTimecode",value:function(e){var t,i,n;return R.isValidTimeValue(e)?(e=1e3*e,t=Math.floor(e/36e5),i=Math.floor(e/6e4%60),n=Math.floor(e/1e3%60),e=Math.floor(e%1e3),"".concat(R.addLeadingZeros(t,2),":").concat(R.addLeadingZeros(i,2),":").concat(R.addLeadingZeros(n,2),".").concat(R.addLeadingZeros(e,3))):""}},{key:"progressFormatted",value:function(){return this.convertToTimecode(this.progress)}}]),S);function S(e,t,i){var n,r,a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,o=4<arguments.length&&void 0!==arguments[4]&&arguments[4];for(r in c(this,S),(n=J.call(this)).ad=t,n.creative=i,n.variation=a,n.muted=o,n.impressed=!1,n.skippable=!1,n.trackingEvents={},n.lastPercentage=0,n._alreadyTriggeredQuartiles={},n.emitAlwaysEvents=["creativeView","start","firstQuartile","midpoint","thirdQuartile","complete","resume","pause","rewind","skip","closeLinear","close"],n.creative.trackingEvents){var l=n.creative.trackingEvents[r];n.trackingEvents[r]=l.slice(0)}return"linear"!==n.creative.type?n._initVariationTracking():n._initLinearTracking(),e&&n.on("start",function(){e.lastSuccessfulAd=Date.now()}),n}function P(e,t,i){c(this,P),this.cappingFreeLunch=e||0,this.cappingMinimumTimeInterval=t||0,this.defaultOptions={withCredentials:!1,timeout:0},this.vastParser=new oe,this.storage=i||new se,void 0===this.lastSuccessfulAd&&(this.lastSuccessfulAd=0),void 0===this.totalCalls&&(this.totalCalls=0),void 0===this.totalCallsTimeout&&(this.totalCallsTimeout=0)}function M(){c(this,M),this.storage=this.initStorage()}function O(){var e;return c(this,O),(e=ee.call(this)).remainingAds=[],e.errorURLTemplates=[],e.rootErrorURLTemplates=[],e.maxWrapperDepth=null,e.URLTemplateFilters=[],e.fetchingOptions={},e.parsingOptions={},e}return e.VASTClient=ce,e.VASTParser=oe,e.VASTTracker=E,e.parseDuration=V,Object.defineProperty(e,"__esModule",{value:!0}),e}({});!function(e,t){"function"==typeof define&&define.amd?define([],t.bind(this,e,e.videojs)):"undefined"!=typeof module&&module.exports?module.exports=t(e,e.videojs):t(e,e.videojs)}(window,function(ce,ue){"use strict";const i=(v,o,g)=>{var t={nonlinearRecall:ue.errorDisplay=!1,withCredentials:!1,timeout:6e3,resolveAll:!0,wrapperLimit:10,allowMultipleAds:!0,allowAdPods:!0,cancelAdPods:!1,clickthroughMethod:"player",closeNonlinearButton:!0,closeButtonDelay:0,closeNonlinearTheme:"light",autoClose:!1,outstreamClose:!1,brandText:"",brandUrl:"",outstreamCloseTheme:"dark",autoplay:!1,skipTimer:!1,mode:"normal",target:"_blank"};function n(){var e=["9788688NSrMSK","12QVBavb","vodevel","2351896cmHvdt","5118253RBplnI","68304ETDDdT","2296112yrAAiC","11004HtobrK","includes","6wxoHXr","hostname","121175QSMxKK"];return(n=function(){return e})()}var i=r;function r(e,t){var i=n();return(r=function(e,t){return i[e-=153]})(e,t)}for(var a=r,l=n();;)try{if(458333==-parseInt(a(161))*(-parseInt(a(153))/2)+-parseInt(a(155))/3+-parseInt(a(154))/4+parseInt(a(159))/5*(-parseInt(a(157))/6)+-parseInt(a(164))/7+parseInt(a(163))/8+parseInt(a(160))/9)break;l.push(l.shift())}catch(e){l.push(l.shift())}if(!location[i(158)][i(156)](i(162)))return!1;function y(e){ce.console&&console.log(e),v.$(".vjs-tech").style.opacity=1;e=v.el_.querySelector(".vjs-replay-button");e&&(e.style.opacity=1),A.muteallow&&v.muted(A.muted)}if(v.one("playing",function(){A.muteallow=!0}),o.options)try{g=ue.obj.merge(t,o.options||{})}catch(e){g=ue.mergeOptions(t,o.options||{})}else g=t;let s,c=0,u=!1,d=!1,p=[];v.liveTime=function(){return c};function h(){let e=!1;(e=m()?!0:e)?(c+=.25,s=setTimeout(h,250)):(clearTimeout(s),u=!1)}function m(){try{return v.duration()===1/0?1:"8"===ue.browser.IOS_VERSION&&0===v.duration()}catch(e){}}v.on("pause",function(){clearTimeout(s),u=!1}),v.on("playing",function(){let e=!1;(e=m()?!0:e)&&!0!==v.isOffline&&!0!==u&&(u=!0,s=setTimeout(h,500))});var k=function(e,t,i,n){var r=document.createElement(e);return void 0!==t&&""!==t&&(r.className=t),void 0!==i&&Object.entries(i).forEach(e=>{var[e,t]=e;r.setAttribute(e,t)}),void 0!==n&&""!==n&&(r.innerHTML=n),r},i=document.createElement("style"),t=(i.innerHTML=".nv-skip-icon{margin-top:0;display:inline-block;fill:#fff;width:22px;height:25px;vertical-align:middle;margin-left:5px}.vjs-touch-inactive .nv-nonlinear{bottom:10px!important}.vjs-user-inactive:not(.vjs-paused) .nv-nonlinear{bottom:10px!important}.nv-recall:hover{opacity:1;background:#FFF}.nv-triangle{width:0px;height:0px;border-style:solid;border-width:0 6px 8px 6px;border-color:transparent transparent #444 transparent;transform: rotate(0deg);position:absolute;top:2px;left:6px;}.nv-recall{opacity:.7;position:absolute;width:26px;height:14px;box-shadow:1px 1px 1px rgba(0,0,0,.7);background:rgba(255,255,255,.7);border:solid 1px rgba(255,255,255,.7);border-bottom: 0;bottom:0;left:50%;margin-left:-13px;cursor:pointer;}.nonlinear-close{position:absolute;right:5px;top:5px;z-index:5;width:22px;height:22px;cursor:pointer;background-color:#e5e5e5;-webkit-border-radius:50%;border-radius:50%;line-height:22px;color:#222;font-size:22px}.nv-nonlinear{bottom:60px;max-width:95%;min-width:320px;position:absolute;background:transparent;-webkit-transform:translateX(-50%);transform:translateX(-50%);left:50%;cursor:pointer;text-align:center;border:0;opacity:0;-webkit-transition:bottom .5s ease,opacity .5s ease;transition:bottom .5s ease,opacity .5s ease;z-index:21474836}.nonlinear-close-narrow{top:auto;right:auto;bottom:5px;left:50%;width:80px;marginLeft:-40px;fontSize:14px;fontWeight:bold}.nv-visible{opacity:1;pointer-events:auto}.vjs-ad-playing .nv-nonlinear{opacity:0!important;pointer-events:none!important}.nv-nonlinear img(width:100%;height:auto)nv-nonlinear-close{}.nv-blocker{position:absolute;top:0;left:0;bottom:0;right:0;cursor:pointer}.nv-icon-bottom{bottom:80px}.nv-icon{transition:bottom .3s ease;animation: show 600ms ease forwards;opacity:0;display:table;transform: rotateX(-90deg);z-index:21474}@keyframes show {100%{opacity:1;transform:none}}.nv-skip{position:absolute;right:10px;bottom:70px;background: rgba(0,0,0,.66);color:#fff;font-family:Arial;font-size:16px;border: solid 2px transparent;border-radius:18px;padding:0 10px;line-height:35px}.nv-skip-active{cursor:pointer;pointer-events:auto}.nv-skip-active:hover{color:#fff;border-color:#999}.nv-nonlinear img {width:100%;height:auto}.nonlinear-close-dark{background-color:#222;color:#fff}",v.el_.insertBefore(i,v.controlBar.el()),k("div","vjs-skin"));v.el_.appendChild(t);let f=getComputedStyle(t,":before").getPropertyValue("content");f=f.replace(/^["'](.+(?=["']$))["']$/,"$1");v.one("playing",function(){v.bigPlayButton.el_.style.display="none"}),I();var T=[],b={},A={muted:!1,muted:!1,muteallow:!1,lastPod:!0,preroll:!1,vmap:[],adStarted:!1,currentAdId:0,firstPlay:!1,adPlaying:!1,trackingEvents:[],skin:f,bottomIcons:[],snapshot:null,linear:[],nonlinear:[],companions:[],blocker:null,skip:-1,skipButton:null,currentPod:0,labelStyle:null,divLabel:null};function R(e,t){let i=-1,n=-1,r=null;"linear"!==t&&"icon"!=t||(r=A.linear[A.currentPod-1]),"nonlinear"===t&&(r=A.nonlinear),null!==(r="companion"===t?A.companion:r)&&(n=function(t){let i="";if(t.universalAdIds)if(1<t.universalAdIds.length){for(let e=0;e<t.universalAdIds.length;e++)t.universalAdIds[e].idRegistry&&(i+=t.universalAdIds[e].idRegistry+" "+t.universalAdIds[e].value+",");i=i.slice(0,-1)}else 0<t.universalAdIds.length&&(i=t.universalAdIds[0].idRegistry+" "+t.universalAdIds[0].value);return i=""===i?-1:encodeURIComponent(i)}(r),r.adServingId)&&(i=r.adServingId);var a,o,l=new Date,s=l.getTime(),c=l.getTimezoneOffset()/60,l=6e4*l.getTimezoneOffset(),s=encodeURIComponent(new Date(s-l).toISOString().slice(0,-1)+(0<c?"-":"+")+("0"+c).slice(-2)),l=Math.random().toString().slice(2,10),c=encodeURIComponent(navigator.userAgent),u=encodeURIComponent(ce.location.hostname),d="number"==typeof(a=v.currentTime())?(o=function(e,t){return("000"+e).slice(-1*t)},a=parseFloat(a).toFixed(3),d=Math.floor(a/60/60),h=Math.floor(a/60)%60,m=Math.floor(a-60*h),a=a.slice(-3),o(d,2)+":"+o(h,2)+":"+o(m,2)+"."+o(a,3)):-1;let p="-1";v.muted()&&(p+="muted"),v.isFullscreen()&&(p+=",fullscreen");var h=parseInt(v.el().offsetWidth)+","+parseInt(v.el().offsetHeight),m=encodeURIComponent(ce.location.href);return e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace("[CACHEBUSTING]",l)).replace("[TIMESTAMP]",s)).replace("[DEVICEUA]",c)).replace("[DOMAIN]",u)).replace("[PLAYERSTATE]",p)).replace("[PLAYERSIZE]",h)).replace("[CONTENTPLAYHEAD]",d)).replace("[ADPLAYHEAD]",d)).replace("[MEDIAPLAYHEAD]",d)).replace("[PAGEURL]",m)).replace("[ADSERVINGID]",i)).replace("[ADTYPE]",t)).replace("[UNIVERSALADID]",n)}A.closeButtonDelay=g.closeButtonDelay,v.vast.request=function(e){v.off("timeupdate",W),T=[],b={},A.adPlaying&&M(),A={preroll:!1,vmap:[],adStarted:!1,currentAdId:0,firstPlay:!1,adPlaying:!1,muted:!1,trackingEvents:[],skin:f,bottomIcons:[],snapshot:null,linear:[],nonlinear:[],companions:[],blocker:null,skip:-1,skipButton:null,currentPod:0,labelStyle:null,divLabel:null},I(),o=e,V()},v.vast.reset=function(){if(A.preroll=!1,A.adStarted=!1,A.currentAdId=0,A.adPlaying=!1,A.skip=-1,A.currentPod=0,A.adPlaying&&M(),I(),0<T.length)for(let e=0;e<T.length;e++)T[e].used=!1;0<T.length&&0===T[0].timeOffset&&(A.outstream?(T[0].used=!0,A.preroll=!0,setTimeout(function(){x(0)},10)):v.one("play",function(){T[0].used=!0,setTimeout(function(){x(0)},10)}))};function L(e){let t='<VAST version="4.0" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns="http://www.iab.com/VAST">',i;if(t+='<Ad><InLine><AdSystem version="4.0">IAB TechLab</AdSystem>',e.trackingURL&&e.adId&&(t+='<Impression id="Impression-ID">'+e.trackingURL+"?action=impression&amp;id="+e.adId+"</Impression>"),e.trackingURL&&e.adId&&(t+="<Error>"+e.trackingURL+"?action=error&amp;id="+e.adId+"</Error>"),t=(t+="<Creatives>")+(e.adId?'<Creative adId="'+e.adId+'">':"<Creative>"),e.skip?(i=parseInt(e.skip),t+=0<i&&i<60?'<Linear skipoffset="00:00:'+i+'">':0<=i?'<Linear skipoffset="00:00:0'+i+'">':"<Linear>"):t+="<Linear>",t=(t=e.trackingURL&&e.adId?(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t+="<TrackingEvents>")+'<Tracking event="start">'+e.trackingURL+"?action=start&amp;id="+e.adId+"</Tracking>")+'<Tracking event="firstQuartile">'+e.trackingURL+"?action=firstQuartile&amp;id="+e.adId+"</Tracking>")+'<Tracking event="midpoint">'+e.trackingURL+"?action=midpoint&amp;id="+e.adId+"</Tracking>")+'<Tracking event="thirdQuartile">'+e.trackingURL+"?action=thirdQuartile&amp;id="+e.adId+"</Tracking>")+'<Tracking event="complete">'+e.trackingURL+"?action=complete&amp;id="+e.adId+"</Tracking>")+'<Tracking event="pause">'+e.trackingURL+"?action=pause&amp;id="+e.adId+"</Tracking>")+'<Tracking event="resume">'+e.trackingURL+"?action=resume&amp;id="+e.adId+"</Tracking>")+'<Tracking event="skip">'+e.trackingURL+"?action=skip&amp;id="+e.adId+"</Tracking>")+'<Tracking event="mute">'+e.trackingURL+"?action=mute&amp;id="+e.adId+"</Tracking>")+'<Tracking event="unmute">'+e.trackingURL+"?action=unmute&amp;id="+e.adId+"</Tracking>")+'<Tracking event="fullscreen">'+e.trackingURL+"?action=unmute&amp;id="+e.adId+"</Tracking>")+'<Tracking event="exitFullscreen">'+e.trackingURL+"?action=unmute&amp;id="+e.adId+"</Tracking>")+'<Tracking event="clickthrough">'+e.trackingURL+"?action=clickthrough&amp;id="+e.adId+"</Tracking></TrackingEvents>":t)+(e.duration?"<Duration>"+e.duration+"</Duration>":"<Duration>00:00:00</Duration>")+"<MediaFiles>",Array.isArray(e.media))for(var n=0;n<e.media.length;n++)t=(t+='<MediaFile type="'+e.media[n].type+'" scalable="1" maintainAspectRatio="1">')+"<![CDATA["+e.media[n].src+"]]></MediaFile>";else t=(t+='<MediaFile type="'+e.media.type+'" scalable="1" maintainAspectRatio="1">')+"<![CDATA["+e.media.src+"]]></MediaFile>";return t=(t=(t=(t+="</MediaFiles>")+"<VideoClicks>"+'<ClickThrough id="blog">')+("<![CDATA["+e.clickthrough+"]]>"))+"</ClickThrough>"+"</VideoClicks>",t=(t=e.icon?(t=(t=(t=(t+="<Icons>")+'<Icon program="AdChoices" height="0" width="0" xPosition="10" yPosition="bottom"><StaticResource>')+"<![CDATA["+e.icon+"]]></StaticResource>")+"<IconClicks><IconClickThrough><![CDATA["+e.clickthrough+" ]]></IconClickThrough></IconClicks>")+"</Icon></Icons>":t)+"</Linear>"+"</Creative></Creatives></InLine></Ad></VAST>"}function w(e){setTimeout(function(){x(e)},20)}v.on("ended",function(){let t=!0;var e;if(!A.fin&&v.el().className.indexOf("vjs-ad-playing")<0){I();for(let e=0;e<T.length;e++)"end"===T[e].timeOffset&&!0!==T[e].used&&(t=!1,A.adPlaying=!0,T[e].used=!0,w(e));t&&(e=v.el_.querySelector(".vjs-replay-button"))&&(e.style.opacity=1)}});function C(e){var t={withCredentials:g.withCredentials,timeout:g.timeout,wrapperLimit:g.wrapperLimit,resolveAll:g.resolveAll,allowMultipleAds:g.allowMultipleAds,allowMultipleAdPods:g.allowMultipleAdPods,cancelAdPods:g.cancelAdPods,clickthroughMethod:g.clickthroughMethod,closeButton:g.closeNonlinearButton,closeTheme:g.closeNonlinearTheme,autoClose:g.autoClose,outstreamClose:g.outstreamClose,nonlinearRecall:!1,tagURL:null,fallbackURL:null,tagXML:null,used:!1,timeOffset:0};return e.options&&(e.options.withCredentials&&(t.withCredentials=e.options.withCredentials),e.options.timeout&&(t.timeout=e.options.timeout),e.options.wrapperLimit&&(t.wrapperLimit=e.options.wrapperLimit),e.options.resolveAll&&(t.resolveAll=e.options.resolveAll),e.allowMultipleAds&&(t.allowMultipleAds=e.options.allowMultipleAds),e.allowAdPods&&(t.allowAdPods=e.options.allowAdPods),e.options.cancelAdPods&&(t.cancelAdPods=e.options.cancelAdPods),e.options.clickthroughMethod&&(t.clickthroughMethod=e.options.clickthroughMethod),e.options.closeButton&&(t.closeButton=e.options.closeButton),e.options.closeTheme&&(t.closeTheme=e.options.closeTheme),e.options.autoClose&&(t.autoClose=e.options.autoClose),e.options.outstreamClose&&(t.outstreamClose=e.options.outstreamClose),e.options.nonlinearRecall&&(custom.options.nonlinearRecall=e.options.nonlinearRecall),e.options.closeNonlinearTheme)&&(t.closeNonlinearTheme=e.options.closeNonlinearTheme),e.withCredentials&&(t.withCredentials=e.withCredentials),e.timeout&&(t.timeout=e.timeout),e.wrapperLimit&&(t.wrapperLimit=e.wrapperLimit),e.allowMultipleAds&&(t.allowMultipleAds=e.allowMultipleAds),e.allowAdPods&&(t.allowAdPods=e.allowAdPods),e.cancelAdPods&&(t.cancelAdPods=e.cancelAdPods),e.clickthroughMethod&&(t.clickthroughMethod=e.clickthroughMethod),e.closeButton&&(t.closeButton=e.closeButton),e.closeTheme&&(t.closeTheme=e.closeTheme),e.autoClose&&(t.autoClose=e.autoClose),e.outstreamClose&&(t.outstreamClose=e.outstreamClose),e.nonlinearRecall&&(t.nonlinearRecall=e.nonlinearRecall),e.closeNonlinearTheme&&(t.closeNonlinearTheme=e.closeNonlinearTheme),e.tagURL&&(t.tagURL=e.tagURL),e.fallbackURL&&(t.fallbackURL=e.fallbackURL),e.xml&&(t.tagXML=e.xml),e.timeOffset&&(t.timeOffset=e.timeOffset),t}const B=function(){if(o.ads){var e=[];Array.isArray(o.ads)?e=o.ads:e.push(o.ads);for(var t=0;t<e.length;t++){var i,n,r=e[t];r.tagURL?(i=C(r),T.push(i)):r.tagXML?(r.xml=r.tagXML,i=C(r),T.push(i)):r.media&&r.clickthrough&&(n=L(r),n=(new DOMParser).parseFromString(n,"text/xml"),r.xml=n,n=C(r),T.push(n))}}else{var a;let e=null,t=[];o.tagURL?(t=o.tagURL,o.fallbackURL&&(fallbackURL=o.fallbackURL),o.config&&(o.config.withCredentials&&(withCredentials=o.config.withCredentials),o.config.clickthroughMethod&&(clickthroughMethod=o.config.clickthroughMethod),o.config.timeout&&(timeout=o.config.timeout),o.config.resolveAll,o.config.wrapperLimit&&(wrapperLimit=o.config.wrapperLimit),o.config.allowMultipleAds&&(allowMultipleAds=!0),void 0!==o.config.closeNonlinearButton&&(closeButton=o.config.closeNonlinearButton),o.config.autoClose&&(autoClose=o.config.autoClose),void 0!==o.config.brandText&&(brandText=g.brandText=o.config.brandText),void 0!==o.config.brandUrl&&(brandUrl=g.brandUrl=o.config.brandUrl),o.config.outstreamClose&&(outstreamClose=o.config.outstreamClose),void 0!==o.config.outstreamCloseTheme&&(outstreamCloseTheme=alist.config.outstreamCloseTheme),o.config.closeNonlinearTheme&&(closeTheme=o.config.closeNonlinearTheme),o.config.nonlinearRecall)&&(nonlinearRecall=o.config.nonlinearRecall),o.withCredentials&&(withCredentials=o.withCredentials),o.autoplay&&(g.autoplay=o.autoplay),ad.tagURL=t,e=C(o)):o.tagXML?((t=[]).push(o.tagXML),e=op(o),e={tagXML:o.tagXML,used:!1,timeOffset:0,autoClose:autoClose,brandText:brandText,brandUrl:brandUrl,outstreamCloseTheme:outstreamCloseTheme,outstreamClose:outstreamClose,closeButton:closeButton,nonlinearRecall:nonlinearRecall,closeTheme:closeTheme,clickthroughMethod:clickthroughMethod}):o.media&&o.clickthrough&&(o.config&&(o.config.clickthroughMethod&&(clickthroughMethod=o.config.clickthroughMethod),o.config.autoClose&&(autoClose=o.config.autoClose),o.config.outstreamClose&&(outstreamClose=o.config.outstreamClose),void 0!==o.config.brandText&&(brandText=g.brandText=o.config.brandText),void 0!==o.config.brandUrl&&(brandUrl=g.brandUrl=o.config.brandUrl),void 0!==o.config.outstreamCloseTheme)&&(outstreamCloseTheme=o.config.outstreamCloseTheme),a=L(o),a=(new DOMParser).parseFromString(a,"text/xml"),C(o).tagXML=a,T.push,T.push({used:!1,tagXML:a,autoClose:autoClose,timeOffset:0,brandText:brandText,brandUrl:brandUrl,outstreamCloseTheme:outstreamCloseTheme,outstreamClose:outstreamClose,nonlinearRecall:nonlinearRecall,closeButton:closeButton,closeTheme:closeTheme,clickthroughMethod:clickthroughMethod})),e&&T.push(e)}};function j(s){let t;var e=s.tagURL;let i=g.timeout,n=(s.timeout&&(i=s.timeout),g.withCredentials);s.withCredentials&&(n=s.withCredentials),"https:"===ce.location.protocol&&0===e.indexOf("http://")&&y("XHR URLHandler: Cannot go from HTTPS to HTTP.");try{const a=function(){try{var e=new ce.XMLHttpRequest;return"withCredentials"in e?e:null}catch(e){return null}}();a.open("GET",e),a.timeout=i,a.withCredentials=n,a.overrideMimeType&&a.overrideMimeType("text/xml"),a.onload=()=>{var e=a;if(200===e.status)try{"VMAP"!==(t=e.responseXML).documentElement.localName?(s.tagXML=t,s.tagURL=null,E(s)):function(e){var t,i=[];for(t in e.documentElement.childNodes){var n=e.documentElement.childNodes[t];"AdBreak"==n.localName&&(n=function(e){var t,i={};for(t in i.timeOffset=e.getAttribute("timeOffset"),i.breakType=e.getAttribute("breakType"),i.breakId=e.getAttribute("breakId"),i.adSource=null,e.childNodes){var n=e.childNodes[t];"AdSource"===n.localName&&(n=function(e){var t,i={};for(t in i.id=e.getAttribute("id"),i.allowMultipleAds=e.getAttribute("allowMultipleAds"),i.followRedirects=e.getAttribute("followRedirects"),i.vastAdData=null,i.adTagURI=null,i.customData=null,e.childNodes){var n=e.childNodes[t];switch(n.localName){case"AdTagURI":i.adTagURI={templateType:n.getAttribute("templateType"),uri:(n.textContent||n.text||"").trim()},i.adTagURI=(n.textContent||n.text||"").trim();break;case"VASTAdData":for(i.vastAdData=n.firstChild;i.vastAdData&&1!==this.vastAdData.nodeType;)this.vastAdData=this.vastAdData.nextSibling;break;case"CustomAdData":i.customData=n}}return i}(n),i.adSource=n.adTagURI,i.adId=n.id)}return i}(n),i.push(n))}var r=[];if(0<i.length){for(var a,o,l=0;l<i.length;l++)i[l].adSource&&!i[l].adSource.uri&&i[l].timeOffset&&("string"==typeof(a="string"==typeof(a=i[l].timeOffset)&&"start"!==a.toLowerCase()&&"end"!==a.toLowerCase()?function(e){var[e=0,t=0,i=0]=e.split(":").reverse();return 3600*+i+60*+t+ +e}(a):a)&&"start"===(a=a.toLowerCase())&&(a=0),o=i[l].adSource,o={tagURL:o,id:i[l].adId,timeOffset:a},s.withCredentials&&(o.widthCredentials=s.withCredentials),s.timeout&&(o.timeout=s.timeout),s.resolveAll&&(o.resolveAll=s.resolveAll),s.wrapperLimit&&(o.wrapperLimit=s.wrapperLimit),s.allowMultipleAds&&(o.allowMultipleAds=s.allowMultipleAds),s.clickthroughMethod&&(o.clickthroughMethod=s.clickthroughMethod),s.closeButton&&(o.closeButton=s.closeButton),s.closeTheme&&(o.closeTheme=s.closeTheme),s.nonlinearRecall&&(o.nonlinearRecall=s.nonlinearRecall),s.autoClose&&(o.autoClose=s.autoClose),s.outstreamClose&&(o.outstreamClose=s.outstreamClose),s.brandText&&(o.brandText=g.brandText=s.brandText),s.brandUrl&&(o.brandUrl=g.brandUrl=s.brandUrl),s.outstreamCloseTheme&&(o.outstreamCloseTheme=s.outstreamCloseTheme),r.push(o));E(r)}}(t)}catch(e){E(s)}else r(0,!1)},a.onerror=()=>r(a,!1),a.onabort=()=>r(a,!1),a.ontimeout=()=>r(a,!0),a.send()}catch(e){E(s)}function r(e,t){t&&y("XHR URLHandler: Request timed out after "+g.timeout+" +ms."),E(s)}}const E=function(e){if(0<e.length){let t=null;if(o.config&&(t=o.config),o.fallbackURL&&(e[0].fallbackURL=o.fallbackURL),(o=[]).ads=e,t)for(let e=0;e<o.ads.length;e++)o.ads[e].config=t}else{o={};var t=[];t.push(e),o.ads=t}B(),0<T.length&&(!0!==g.allowMultipleAds&&((e=[]).push(T[0]),T=e),0===T[0].timeOffset)&&(A.outstream?T[0].used||(T[0].used=!0,A.adPlaying=!0,A.preroll=!0,setTimeout(function(){x(0)},10)):v.paused()?v.one("play",function(){v.$(".vjs-tech").style.opacity=0,T[0].used||(A.adPlaying=!0,T[0].used=!0,setTimeout(function(){x(0)},10))}):T[0].used||(A.adPlaying=!0,T[0].used=!0,setTimeout(function(){x(0)},10)))};function V(){var e;v.on("timeupdate",W),o.tagURL?j(o):(B(),0<T.length&&(!0!==g.allowMultipleAds&&((e=[]).push(T[0]),T=e),0===T[0].timeOffset)&&(A.outstream?(T[0].used=!0,A.preroll=!0,setTimeout(function(){x(0)},10)):v.one("playing",function(){T[0].used=!0,setTimeout(function(){x(0)},10)})))}V();function F(t,r){var e,i,n;function a(e){return 1<e.readyState()||void 0===e.seekable()||0<e.seekable().length}t.src()===r.src?(t.play(),A.snapshot=null):(e=t.el().querySelector(".vjs-tech"),i=20,"style"in r&&e.setAttribute("style",r.style||""),t.src(r.sources),t.$(".vjs-tech").style.opacity=1,function(){for(var e=0;e<T.length;e++)if(!T[e].used)return;return 1}()&&t.one("playing",function(){setTimeout(function(){H(!1)},500)}),r.ended?(t.currentTime(r.duration),t.play()):(t.muted(r.muted),t.one("playing",function(){var e,t=r.tracks;console.log,napshot.tracks;for(var i=0;i<t.length;i++){var n=t[i];e=r.suppressedTracks[i],n.mode=e.mode}}),t.one("canplay",function e(){t.play();if(!a(t)&&i--)setTimeout(e,50);else try{t.currentTime()!==r.currentTime?(r.playing&&t.one("seeked",function(){r.ended||t.play()}),0<t.seekable().length&&m()?t.one("playing",function(){t.currentTime(t.seekable().end(0)+r.currentTime)}):t.currentTime(r.currentTime)):r.playing&&t.play(),A.snapshot=null}catch(e){ue.log.warn("Failed to resume the content after an advertisement",e)}}),n=setTimeout(function(){t.trigger("canplay")},1e3),t.one("canplay",function(){clearTimeout(n)})))}const H=function(e){var t=v.el().querySelector(".vjs-replay-button"),i=v.el().querySelector(".vjs-sharing-overlay"),n=v.el().querySelector(".vjs-grid"),r=v.el().querySelector(".vjs-cend");function a(e,t){t?(e.style.visibility="hidden",e.style.pointerEvents="none"):e.removeAttribute("style")}t&&a(t,e),i&&a(i,e),n&&a(n,e),r&&a(r,e)},q=function(e){var t=e.el().querySelector(".vjs-tech"),i=e.textTracks?e.textTracks():[],n=[],r={ended:e.ended(),muted:e.muted(),src:e.currentSrc(),currentTime:e.currentTime(),duration:e.duration(),currentSource:e.currentSource(),sources:e.currentSources(),type:e.currentType(),playing:!e.paused(),suppressedTracks:[]};r.duration&&r.duration-r.currentTime<1&&(r.ended=!0),r.ended&&(r.currentTime=e.duration()+1),r.duration&&r.duration-r.currentTime<1&&(r.ended=!0);for(let e=0;e<i.length;e++){var a=i[e];n.push({track:a,mode:a.mode}),a.mode="disabled"}return r.suppressedTracks=n,0<e.seekable().length&&m()&&(r.currentTime=e.currentTime()-e.seekable().end(0)),t&&(r.nativePoster=t.poster,r.style=t.getAttribute("style")),H(!0),r};const x=function t(i){let n=T[i],r=(A.currentAdId=i,[]);var e;n.tagXML&&(new VAST.VASTParser).parseVAST(n.tagXML).then(e=>{(r=e).clickthroughMethod=n.clickthroughMethod,r.closeButton=n.closeButton,r.closeTheme=n.closeTheme,r.nonlinearRecall=n.nonlinearRecall,_(r)}).catch(e=>{A.adPlaying=!1,y(e.toString()),y("Ad cancelled")}),n.tagURL&&(e={withCredentials:n.withCredentials,timeout:g.timeout,resolveAll:!0,wrapperLimit:g.wrapperLimit,allowMultipleAds:!0},(new VAST.VASTParser).getAndParseVAST(n.tagURL,e).then(e=>{(r=e).clickthroughMethod=n.clickthroughMethod,r.closeButton=n.closeButton,r.closeTheme=n.closeTheme,r.nonlinearRecall=n.nonlinearRecall,r.autoClose=n.autoClose,r.brandText=n.brandText,r.brandUrl=n.brandUrl,r.outstreamCloseTheme=n.outstreamCloseTheme,r.oustreamClosePosition=n.oustreamClosePosition,r&&_(r)}).catch(e=>{if(n.fallbackURL){let e=null;Array.isArray(n.fallbackURL)?(e=n.fallbackURL[0],n.fallbackURL.shift(),0==n.fallbackURL.length&&(n.fallbackURL=null)):(e=n.fallbackURL,n.fallbackURL=null),n.tagURL=e,t(i)}A.adPlaying=!1,y(e.toString()),y("Ad cancelled")}))};function W(){var e=v.el_.querySelector(".vjs-replay-button");if(e&&(e.style.opacity=0),!d&&0<T.length&&v.options_.adMarkers&&(d=!0,!m()))for(let e=0;e<T.length;e++){var t=T[e].timeOffset,t=("100%"==t&&(T[e].timeOffset="end"),t.toString());t.includes("%")&&(T[e].timeOffset=v.duration()*parseInt(t)/100),0<parseInt(T[e].timeOffset)&&(t=T[e].timeOffset/v.duration(),p[e]=document.createElement("div"),p[e].className="vjs-ad-marker",p[e].style.left=100*t+"%",v.el_.querySelector(".vjs-progress-holder").appendChild(p[e]))}if(!0!==A.adPlaying){let i=v.currentTime();m()&&(i=v.liveTime());for(let t=0;t<T.length;t++){let e=T[t].timeOffset;var n=e.toString();if(n.includes("%")){if(m())return;e=v.duration()*parseInt(n)/100,e=parseInt(e)}if(g.skipTimer,!0!==T[t].used&&"end"!==T[t].timeOffset&&i>=e){p[t]&&p[t].parentNode.removeChild(p[t]),A.currentAdId=t,A.adStarted=!0,T[t].used=!0,w(t);break}}}}function _(e){A.currentAd=e,A.currentPod=0,v.$(".vjs-tech").hasAttribute("outstream")&&(v.$(".vjs-tech").hasAttribute("outstreamvisit")&&v.el_.classList.add("vjs-set-visit"),g.mode="outstream",A.clickthrough="",v.muted(!0),v.el_.classList.contains("vjs-set-visit")||v.el_.classList.add("vjs-set-replay"));var t=e.ads;if(t.length<1&&(A.adPlaying=!1,y("Error. Empty VAST response."),y("Ad cancelled."),T[A.currentAdId].fallbackURL)){let e=null;Array.isArray(T[A.currentAdId].fallbackURL)?(e=T[A.currentAdId].fallbackURL[0],T[A.currentAdId].fallbackURL.shift(),0==T[A.currentAdId].fallbackURL.length&&(T[A.currentAdId].fallbackURL=null)):(e=T[A.currentAdId].fallbackURL,T[A.currentAdId].fallbackURL=null),T[A.currentAdId].tagURL=e,x(A.currentAdId)}A.clickthrough=e.clickthroughMethod,A.closeButton=e.closeButton,A.closeButton=e.closeButton,A.closeTheme=e.closeTheme,A.nonlinearRecall=e.nonlinearRecall;e=g.mode;A.companions=[],A.linear=[],A.nonlinears=[];for(var i=0;i<t.length;i++)if(t[i].creatives)for(var n=0;n<t[i].creatives.length;n++){let e=!1;"linear"===t[i].creatives[n].type&&(t[i].impressionURLTemplates&&!e&&(e=!0,t[i].creatives[n].impressionURLTemplates=t[i].impressionURLTemplates),t[i].adServingId&&(t[i].creatives[n].adServingId=t[i].adServingId),A.linear.push(t[i].creatives[n])),"companion"==t[i].creatives[n].type&&(t[i].impressionURLTemplates&&!e&&(e=!0,t[i].creatives[n].impressionURLTemplates=t[i].impressionURLTemplates),t[i].adServingId&&(t[i].creatives[n].adServingId=t[i].adServingId),A.companions.push(t[i].creatives[n])),"nonlinear"===t[i].creatives[n].type&&(t[i].impressionURLTemplates&&!e&&(e=!0,t[i].creatives[n].impressionURLTemplates=t[i].impressionURLTemplates),t[i].adServingId&&(t[i].creatives[n].adServingId=t[i].adServingId),A.nonlinears.push(t[i].creatives[n]))}if("outstream"==e&&1<A.linear.length&&(A.linear.length=1),0<A.linear.length?(!0!==g.allowAdPods&&(A.linear.length=1),X(A.linear[0])):(v.$(".vjs-tech").style.opacity=1,(e=v.el_.querySelector(".vjs-replay-button"))&&(e.style.opacity=1),M()),0<A.nonlinears.length&&!0!==A.outstream){e=A.nonlinears[0];if(!A.outstream&&"outstream"!=g.mode&&(A.nonlinear=e).variations){var c=0;if(I(),A.nonlinear=e,A.nonlinearId=void 0,e.id&&(A.nonlinearId=e.id),"nonLinearAd"===e.variations[c].adType){let i=e.variations[c],r=null;i.id&&(r=i.id),i.id&&(A.nonlinearId=i.id);var c="",u="";i.htmlResource?(c=i.htmlResource,u="html"):i.iframeResource?(c=i.iframeResource,u="iframe"):i.staticResource&&(c='<img style="cursor:pointer" src="'+i.staticResource+'"/>',u="static"),I();let a=k("div","nv-nonlinear"),n=k("div");if(i.width&&(e=a.style.width=N(i.width)),i.height&&(e=a.style.height="auto"),i.expandedWidth&&(a.style.maxWidth=N(i.expandedWidth)),i.expandedHeight&&(a.style.maxHeight=N(i.expandedHeight)),i.nonlinearClickThroughURLTemplate&&"static"==u){let t=!1;n.onontouchend=function(e){t=!0,e.stopPropagation(),m(),setTimeout(()=>{t=!1},500)},n.onclick=function(e){t||(e.stopPropagation(),m())};const m=function(){ce.open(i.nonlinearClickThroughURLTemplate,g.target);let t=[];var e=i.nonlinearClickTrackingURLTemplates;e&&(Array.isArray(e)?e.forEach(function(e){e.url?t.push(e.url):mcl.push(e)}):t.push(e)),S("clickthrough",t,"nonlinear",r)}}let o=null;function d(){var e="nonlinear-close";console.log(A.closeTheme),"light"!==A.closeTheme&&(e="nonlinear-close nonlinear-close-dark"),(o=document.createElement("div")).className=e,0<A.closeButtonDelay&&(o.className=e+" vjs-hidden"),o.setAttribute("role","button"),o.innerHTML="&times;"}a.style.bottom=O()+"px";let l=null;v.on("playerresize",U);if("iframe"===u?(A.closeButton&&(d(),a.appendChild(o)),(e=k("iframe")).src=i.iframeResource,e.scrolling="no",e.style.width="100%",e.style.height="100%",e.style.border="none",e.style.overflow="hidden",e.appendChild(n),a.appendChild(e)):(n.innerHTML=c,"static"==u&&A.closeButton&&(d(),n.appendChild(o)),a.appendChild(n),A.nonlinearRecall&&"static"==u&&((l=k("div","nv-recall vjs-hidden")).setAttribute("role","button"),l.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 48"><path d="M18.59 16.41L20 15l-8-8-8 8 1.41 1.41L12 9.83"></path><path fill="none" d="M0 0h24v24H0V0z"></path></svg>',a.appendChild(l))),l&&"static"==u){let t=!1;function p(){l.classList.add("vjs-hidden"),n.removeAttribute("style"),setTimeout(function(){l.classList.remove("vjs-hidden"),n.style.opacity=0,n.style.pointerEvents="none"},25e3)}l.ontouchend=function(e){t=!0,e.stopPropagation(),setTimeout(()=>{t=!1},500),p()},l.onclick=function(e){t||(e.stopPropagation(),p())}}if(("static"==u||"iframe"==u)&&o){let t=!1;o.ontouchend=function(e){e.stopPropagation(),t=!0,f(),setTimeout(()=>{t=!1},500)},o.onclick=function(e){e.stopPropagation(),t||f()};const f=function(){if(l)n.style.opacity=0,n.style.pointerEvents="none",l.className="nv-recall";else{let t=[];try{var e=A.nonlinear.trackingEvents.close||null;e&&(Array.isArray(e)?e.forEach(function(e){e.url?t.push(e.url):t.push(e)}):t.push(e))}catch(e){}S("close",t,"nonlinear"),a.parentNode.removeChild(a)}}}let s=!1;function h(e){var t;A.adPlaying||s||(s=!0,t=i,setTimeout(function(){v.el().appendChild(a),U();let t=[],e,i=(A.nonlinear.impressionURLTemplates&&(e=A.nonlinear.impressionURLTemplates,Array.isArray(e)?e.forEach(function(e){e.url&&t.push(e.url)}):t.push(e)),S("impression",t,"nonlinear",r),[]),n=A.nonlinear.trackingEvents.creativeView;n&&(Array.isArray(n)?n.forEach(function(e){e.url?i.push(e.url):i.push(e)}):i.push(n)),S("creativeView",i,"nonlinear",r),a.className="nv-nonlinear nv-visible",A.preroll=!1},1e3),"static"!=u&&"iframe"!==u||(t.minSuggestedDuration||(t.minSuggestedDuration=45),t.minSuggestedDuration&&setTimeout(function(){if(A.nonlinearRecall)n.style.opacity=0,n.style.pointerEvents="none",l.className="nv-recall";else try{a&&a.parentNode.removeChild(a)}catch(e){}},1e3*t.minSuggestedDuration+.3),0<A.closeButtonDelay&&setTimeout(function(){o&&(o.className="nonlinear-close")},1e3*A.closeButtonDelay+.3)),v.off("timeupdate",h))}!0!==v.paused?v.on("timeupdate",h):v.one("playing",function(){v.on("timeupdate",h)})}}}0<A.companions.length&&!0!==A.outstream&&z(A.companions[0])}const z=function(t){if(!A.outstream&&"outstream"!=g.mode&&(A.companion=t).variations)for(var i=0;i<t.variations.length;i++)!function(i,n){A.companionId=void 0,i.adId&&(A.companionId=i.adId);let d=!1;function t(s){if("companionAd"===i.variations[n].adType){let r=i.variations[s],a,o=(r.id&&(a=r.id),""),l="";if(0<r.htmlResources.length?(o=r.htmlResources[0],l="html"):0<r.iframeResources.length?(o=r.iframeResources[0],l="iframe"):0<r.staticResources.length&&r.staticResources[0].creativeType&&["image/gif","image/jpeg","image/png"].indexOf(r.staticResources[0].creativeType)&&(o=r.altText?'<img style="width:100%;height:100%;cursor:pointer" alt="'+r.altText+'" src="'+r.staticResources[0].url+'"/>':'<img style="width:100%;height:100%;cursor:pointer" src="'+r.staticResources[0].url+'"/>',l="static"),""!==o){let n=null;if(r.adSlotId&&(s=document.getElementById(r.adSlotId))&&((n=s).innerHTML=""),!n){var t=document.querySelectorAll(".vjs-companion");if(t)for(let e=0;e<t.length;e++)if(!t[e].className.includes("vjs-companion-ex")){t[e].classList.add("vjs-companion-ex"),(n=t[e]).innerHTML="";break}}if(n&&""===n.innerHTML){s=k("div","asset");if("iframe"===l?((c=k("iframe")).src=o,c.scrolling="no",c.style.width="100%",c.style.height="100%",c.style.border="none",c.style.overflow="hidden",s.appendChild(c)):"static"!==l&&"html"!==l||(s.innerHTML=o),n.appendChild(s),r.assetWidth&&(s.style.width=N(r.assetWidth)),r.assetHeight&&(s.style.height=N(r.assetHeight)),r.width&&(n.style.width=N(r.width)),r.height&&(n.style.height=N(r.height)),r.expandedWidth&&(n.style.maxWidth=N(r.expandedWidth)),r.expandedHeight&&(n.style.maxHeight=N(r.expandedHeight)),r.companionClickThroughURLTemplate&&"static"==l){cmend=!1,n.ontouchend=function(){cmend=!0,e.stopPropagation(),u(),setTimeout(()=>{cmend=!1},500)},n.onclick=function(){cmend||(e.stopPropagation(),u())};const u=function(){v.pause(),ce.open(r.companionClickThroughURLTemplate,g.target);var e=r.companionClickTrackingURLTemplates;let t=[];e&&(Array.isArray(e)?e.forEach(function(e){e.url?t.push(e.url):t.push(e)}):t.push(e),S("clickthrough",t,"ompanion",r.id))}}r.TrackingEvents&&r.TrackingEvents.creativeView&&S("view",r.TrackingEvents.creativeView,"companion",a);let t=[];var c=A.companion.impressionURLTemplates;let i=null;!0!==d&&(d=!0,c)&&(Array.isArray(c)?c.forEach(function(e){e.id&&(i=e.id),e.url?t.push(e.url):t.push(e)}):t.push(c)),S("impression",t,"companion",i)}}}}v.paused()?v.one("playing",function(){t(n)}):t(n)}(t,i)};function I(){var e=v.el().querySelector(".nv-nonlinear"),e=(e&&e.parentNode.removeChild(e),v.el().querySelector(".nv-recall"));e&&e.parentNode.removeChild(e);try{v.off("playerresize",U)}catch(e){}try{A.minSuggestedDuration=45}catch(e){}try{A.suggestedStart=0}catch(e){}}const U=function(){var e,t,i=v.el().offsetWidth,n=v.el().offsetHeight,r=v.el().querySelector(".nv-nonlinear");r&&(e=O()+r.offsetHeight,(t=r.querySelector(".nonlinear-close"))&&(n<e?(t.classList.add("nonlinear-close-narrow"),t.innerHTML=v.localize("EXIT")):(t.classList.remove("nonlinear-close-narrow"),t.innerHTML="&times;")),r.offsetWidth>i?(r.style.opacity=0,r.style.pointerEvents="none"):(r.style.bottom=O()+"px",r.style.opacity=1,r.style.pointerEvents="auto"))};function N(e){let t=null;var i=/^\d+(\.\d+)?%$/.test(e);return t=i||"auto"==e?e:Number(e)+"px"}function X(t){A.linearId=void 0,t.adId&&(A.linearId=t.adId),0==A.currentPod&&(A.currentPod=1),A.firstPause=!1,A.trackingEvents=[],b={};var e,i;if(A.linearEvents=[],Object.keys({start:null,pause:null,resume:null,firstQuartile:null,midpoint:null,thirdQuartile:null,mute:null,unmute:null,fullscreen:null,exitFullscreen:null,complete:null,skip:null,clickthrough:null}).forEach(e=>{t.trackingEvents[e]&&t.trackingEvents[e]&&(A.linearEvents[e]=t.trackingEvents[e])}),t.mediaFiles&&(e=t.mediaFiles,i=v.el().getBoundingClientRect().width,e.sort(function(e,t){return Math.abs(i-e.width)-Math.abs(i-t.width)}),(e=e)[0].mimeType?t.mediatoplay={src:e[0].fileURL,type:e[0].mimeType}:t.mediatoplay={src:e[0].fileURL}),t.tracks=[],t.mediatoplay.src){var o=t;if(A.lastPod=!0,1<A.linear.length)for(let e=0;e<A.linear.length;e++)A.linear[e]===o&&e<A.linear.length-1&&(A.lastPod=!1);setTimeout(function(){A.adPlaying=!0;var t=v.controlBar.el().querySelector(".vjs-vast-label"),i=v.el().querySelector(".outstream-label");if(i&&(t=i),null===A.snapshot&&(A.snapshot=q(v)),o.used=!0,v.$(".vjs-tech").style.opacity=1,v.src(o.mediatoplay),v.play(),v.$(".vjs-tech").hasAttribute("outstreamvisit"))o.videoClickThroughURLTemplate.url&&ie(o.videoClickThroughURLTemplate.url);else if(o.videoClickThroughURLTemplate&&"link"!==A.clickthrough&&o.videoClickThroughURLTemplate.url&&ie(o.videoClickThroughURLTemplate.url),"link"===A.clickthrough){A.currentPod;var n=o.videoClickThroughURLTemplate.url;i=v.controlBar.el().querySelector(".vjs-vast-label");i&&i.classList.add("vjs-hidden");A.labelStyle||(A.labelStyle=k("style"),A.labelStyle.innerHTML=".nv-vast-div{position: absolute;font-size:12px;left:10px;top:-20px;color:#e5e5e5;text-shadow:1px 1px 1px #000;font-weight:normal}.nv-vast-div .nv-vast-timer{padding:0 10px 0 5px;}.nv-vast-div .nv-vast-pod {padding:0 5px;}.nv-vast-div .nv-label-icon{width:18px;height:16px;display:inline-block;padding:1px;margin-left:5px;opacity:.8;vertical-align:middle;margin-top:-2px}.nv-vast-div a{cursor: pointer;color: #e5e5e5;text-decoration:none}",v.controlBar.el().appendChild(A.labelStyle));A.divLabel||(A.divLabel=k("div","nv-vast-div"));i="";1<A.linear.length?(r=(r=(r=v.localize("Ad %%NUM%% of %%TOTAL%%")).replace("%%NUM%%",A.currentPod.toString())).replace("%%TOTAL%%",A.linear.length.toString()),i='<span class="nv-vast-pod">'+r+"</span>"):i+=v.localize("Ad");let e=n.replace(/^https?:\/\//,"");20<(e=(e=e.replace(/:\d+/,"")).replace("www.","")).length&&(e=e.substring(0,20)+"...");var r='<span class="nv-label-icon"><svg fill="#fff" height="100%" version="1.1" viewBox="0 0 48 48" width="100%"><path d="M0 0h48v48H0z" fill="none"></path><path d="M38 38H10V10h14V6H10c-2.21 0-4 1.79-4 4v28c0 2.21 1.79 4 4 4h28c2.21 0 4-1.79 4-4V24h-4v14zM28 6v4h7.17L15.51 29.66l2.83 2.83L38 12.83V20h4V6H28z"></path></svg></span>'+e,a=k("span");a.style.cursor="pointer",a.innerHTML=r,A.divLabel.innerHTML=i,A.divLabel.appendChild(a),A.divLabel.style.top=se()+"px",a.onclick=function(e){e.stopImmediatePropagation(),ce.open(n,g.target),S("clickthrough",A.linearEvents.clickthrough||null,"linear"),A.linear[A.currentPod-1].videoClickTrackingURLTemplates&&(e=A.linear[A.currentPod-1].videoClickTrackingURLTemplates)&&e.forEach(function(e){e.url&&S("clickthrough",e.url,"linear")}),v.paused()||v.pause()},(A.outstream?v.el().querySelector(".outstream-controls"):v.controlBar.el()).appendChild(A.divLabel)}else if(t){t.classList.remove("vjs-hidden");let e=v.el_.offsetWidth<480?v.localize("Ad"):v.localize("Advertisement");1<A.linear.length&&"outstream"!==A.mode&&(e+=" ("+A.currentPod+"/"+A.linear.length+")"),t.innerHTML=e}re();A.error=!1,v.on("timeupdate",$),v.one("ended",P),v.one("playing",function(){var n,e;v.$(".vjs-tech").style.opacity=1,A.error?A.error=!1:(ue.adinfo&&!(n=v.el_.querySelector(".vjs-ainfo"))&&((e=k("style")).innerHTML=".vjs-ainfo{position: absolute;top:10px;left:10px;opacity:.8;cursor:pointer;height:18px;display:none;}.vjs-ad-playing .vjs-ainfo{display:inline-block}.vjs-ainfo .vjs-ico-block {height:18px;width:18px;display:inline-block;float:left;filter:drop-shadow(1px 1px 1px #000);}.vjs-ainfo .vjs-label {line-height:18px;float:left;height:18px;transition:all .25s ease;filter:drop-shadow(1px 1px 1px #000);margin-left:5px;max-width:0;font-size:13px;overflow:hidden;display:inline-block;margin-right:5px;}.vjs-ainfo:hover .vjs-label {max-width:200px}.vjs-ad-playing .vjs-ainfo-right {right:10px;left:auto;top:auto;bottom:15px}.vjs-ad-playing .vjs-ainfo-right .vjs-ico-block {float:right}",v.el_.appendChild(e),setTimeout(function(){n=k("div","vjs-ainfo");var e=k("div","vjs-ico-block"),t=(e.innerHTML='<svg fill="none" viewBox="0 0 24 24"><path fill-rule="evenodd" fill="white" d="M2 12C2 6.48 6.48 2 12 2C17.52 2 22 6.48 22 12C22 17.52 17.52 22 12 22C6.48 22 2 17.52 2 12ZM13 16V18H11V16H13ZM12 20C7.59 20 4 16.41 4 12C4 7.59 7.59 4 12 4C16.41 4 20 7.59 20 12C20 16.41 16.41 20 12 20ZM8 10C8 7.79 9.79 6 12 6C14.21 6 16 7.79 16 10C16 11.28 15.21 11.97 14.44 12.64C13.71 13.28 13 13.90 13 15H11C11 13.17 11.94 12.45 12.77 11.82C13.42 11.32 14 10.87 14 10C14 8.9 13.1 8 12 8C10.9 8 10 8.9 10 10H8Z"></path></svg>',k("div","vjs-label"));t.innerHTML=v.localize("Information"),n.appendChild(e),n.appendChild(t),v.el_.appendChild(n),v.$(".vjs-tech").hasAttribute("outstreamvisit")&&"always"===ue.outstreamClose&&(n.style.left="40px",n.style.top="13px");let i=!1;n.ontouchend=e=>{i=!0,e.stopPropagation(),v.pause(),ce.open(ue.adinfo,g.target),setTimeout(()=>{i=!1},500),e.stopPropagation()},n.onclick=e=>{i||(e.stopPropagation(),v.pause(),ce.open(ue.adinfo,g.target))}},100)),oe(),A.firstPlay=!0,v.el_.classList.add("vjs-ad-playing"),o.impressionURLTemplates&&o.impressionURLTemplates.forEach(function(e){e.url&&S("impression",e.url,"linear")}),e=A.linearEvents.start||null,S("start",e,"linear"),o.skipDelay&&(A.skip=o.skipDelay,ne(),le()),Q(o))}),v.on("playerresize",G),v.on("volumechange",J),v.on("play",K),v.on("pause",Z),v.on("fullscreenchange",ee),v.on("error",Y),A.preroll||(A.preroll=!0,v.play()),A.preroll=!1},150)}else M()}v.one("play",function(){var e,t;v.$(".vjs-tech").hasAttribute("outstreamvisit")&&(e=k("style"),t=".video-js .vjs-tech{opacity:1!important}",e.textContent=".video-js .vjs-tech{opacity:1!important}.vjs-visit-blocker{background:rgba(0, 0, 0, .77);bottom:auto;right:10px!important;left:auto!important;top:10px!important;display:table!important;width:auto!important;height:auto!important;color:#fff!important;padding:4px 6px!important;border-radius:8px;border:solid 2px rgba(255, 255, 255, .8)!important}.vjs-visit-blocker:hover{border:solid 2px rgba(255, 255, 255, 1)!important}.vjs-visit-block{position:absolute;transform:translate(-50%, -50%);-webkit-transform:translate(-50%, -50%);top:45%;left:50%;text-align:center;color:#fff}.btn-visit{cursor:pointer;font-size:16px;text-transform:uppercase;background:#383838;display:table;margin-bottom:10px;-webkit-border-radius:50%;border-radius:50%;width:60px;height:60px;line-height:60px;}.btn-visit:hover{background:#484848}.btn-visit-replay{cursor:pointer;display:table;padding:4px 6px;margin:0 auto;border:solid 1px #999}.video-js .vjs-bg-bar{height:0!important}.btn-visit-replay:hover{border-color:#fff}",t=v.$(".vjs-tech"),v.el_.insertBefore(e,t))});const Q=function(e){if(!A.outstream&&"outstream"!=g.mode&&(A.icons=[],e.icons)){let i=e.adId?e.adId:e.id?e.adId:null;if(0<e.icons.length)for(var t=0;t<e.icons.length;t++){var n,r=e.icons[t],a="",o=(r.staticResource?a='<img src="'+r.staticResource+'">':r.htmlResource?a=r.htmlResource:r.iframeResource&&(a=r.iframeResource),"left"),l=0,s="top",c=0,u=(r&&"left"===r.xPosition&&(o="left",l=0),r&&"right"===r.xPosition&&(o="right",l=0),r&&0<=Number(r.xPosition)&&(o="left",l=r.xPosition),r&&"bottom"===r.yPosition&&(s="bottom",c=0),r&&"top"===r.yPosition&&(s="top",c=0,c+=0),r&&0<=Number(r.yPosition)&&(s="top",c=Number(r.yPosition),c+=0),k("div","nv-icon"));if(u.setAttribute("name","adicon"),v.el().appendChild(u),"bottom"===r.yPosition&&(u.style.bottom=D()+"px",A.bottomIcons.push(u),v.on("useractive",()=>{u.style.bottom=D()+"px"}),v.on("userinactive",()=>{!v.paused()&&v.el_.classList.contains("vjs-has-mouse")&&(u.style.bottom="5px")})),u.id="adicon_"+r.program,"iframe"===r.type?((n=k("iframe")).src=r.content,n.scrolling="no",n.style.width="100%",n.style.height="100%",n.style.border="none",n.style.overflow="hidden",u.appendChild(n)):u.innerHTML=a,u.style.position="absolute",r&&"center"===r.xPosition?(u.style.left="50%",u.style.webkitTransform="translateX(-50%)",u.style.transform="translateX(-50%)"):u.style[o]=l+"px",r&&"center"===r.yPosition?(u.style.top="50%",r&&"center"===r.xPosition?(u.style.webkitTransform="translate(-50%,-50%)",u.style.transform="translate(-50%,-50%)"):(u.style.transform="translateY(-50%)",u.style.webkitTransform="translateY(-50%)")):"bottom"!==r.yPosition&&(u.style[s]=c+"px"),r.origY=c,r.iconClickThroughURLTemplate){let t=!(u.style.cursor="pointer");u.ontouchend=function(e){t=!0,e.stopPropagation(),d(),setTimeout(()=>{t=!1},500)},u.onclick=function(e){t||(e.stopPropagation(),d())};const d=function(){ce.open(r.iconClickThroughURLTemplate,g.target);let t=[];var e=r.iconClickTrackingURLTemplates||null;e&&(Array.isArray(e)?e.forEach(function(e){e.id&&(i=e.id),e.url?t.push(e.url):t.push(e)}):t.push(e)),S("clickthrough",t,"icon",i)}}r.iconViewTrackingURLTemplate&&S("view",r.iconViewTrackingURLTemplate,"icon",i)}}};function Y(){A.adPlaying=!1,A.error=!0,y("Media Error.Ad Cancelled"),A.preroll=!0,v.trigger("ended")}function S(e,t,i,n){let r;"linear"==i&&(r=A.linearId),"nonlinear"==i&&(r=A.nonlinearId),"companion"==i&&(r=A.companionId),n&&(r=n),v.trigger("vastEvent",{eventName:e,adType:i,adId:r});try{var a;t&&(Array.isArray(t)?t.forEach(function(e){2<e.length&&((new Image).src=R(e,i))}):(a=new Image,2<t.length&&(a.src=R(t,i))))}catch(e){}}const G=function(){var t=v.el().offsetWidth;if(A.divLabel&&(A.divLabel.style.top=se()+"px"),0<A.bottomIcons.length)for(var e=0;e<A.bottomIcons.length;e++){var i=D();A.bottomIcons[e].style.bottom=i+"px"}le();var n=v.controlBar.el().querySelector(".vjs-vast-label");if(n){let e=n.innerHTML.split(v.localize("Advertisement")).join("");e=e.split(v.localize("Ad")).join(""),n.innerHTML=t<480?v.localize("Ad")+e:v.localize("Advertisement")+e}},$=function(){var i=parseInt(v.currentTime()),e=parseInt(v.duration());if(0<e&&(i>parseInt(e/4)&&!b.firstQuartile&&(b.firstQuartile=!0,S("firstQuartile",A.linearEvents.firstQuartile,"linear")),i>parseInt(e/2)&&!b.midpoint&&(b.midpoint=!0,S("midpoint",A.linearEvents.midpoint,"linear")),i>parseInt(.75*e))&&!b.thirdQuartile&&(b.thirdQuartile=!0,S("thirdQuartile",A.linearEvents.thirdQuartile,"linear")),0<A.skip&&A.skipButton){let e=!1;i=parseInt(A.skip-v.currentTime());0<i?A.skipButton.innerHTML=v.localize("Skip Ad in")+" "+i:(A.skipButton.innerHTML=v.localize("Skip Ad")+'<span class="nv-skip-icon"><svg viewBox="0 0 32 32"><path d="M7 24l12.75-9-12.75-9v18zM22 6v18h3v-18h-3z"></path></svg></span>',A.skipButton.classList.add("nv-skip-active"),e=!0);let t=!1;A.skipButton.ontouchend=function(e){t=!0,e.stopPropagation(),n(),setTimeout(()=>{t=!1},500)},A.skipButton.onclick=function(e){t||(e.stopPropagation(),n())};const n=function(){if(!e)return!1;S("skip",A.linearEvents.skip||null,"linear"),g.cancelAdPods&&(A.linear.length=1),te()}}};const K=function(){A.firstPause&&S("resume",A.linearEvents.resume||null,"linear")},Z=function(){A.firstPause=!0,S("pause",A.linearEvents.pause||null,"linear")},J=function(){v.muted()&&S("mute",A.linearEvents.mute||null,"linear"),!0!==v.muted()&&S("unmute",A.linearEvents.unmute||null,"linear")},ee=function(){v.isFullscreen()?S("fullscreen",A.linearEvents.fullscreen||null,"linear"):S("exitFullscreen",A.linearEvents.exitFullscreen||null,"linear")},te=function(){v.off("ended",P),v.off("timeupdate",$),v.off("playerresize",G),v.off("volumechange",J),v.off("play",K),v.off("pause",Z),v.off("fullscreenchange",ee);var e=v.el().querySelectorAll(".nv-icon");if(e)for(var t=0;t<e.length;t++)e[t].remove();re(),ae();let i=A.skip=0,n=!1;if(1<A.linear.length){for(var r=0;r<A.linear.length;r++)if(!0!==A.linear[r].used){i=r;break}if(0<i&&"outstream"!==A.mode)v.loadingSpinner.el_.style.display="none",A.currentPod=A.currentPod+1,X(A.linear[i]);else{if(!A.outstream&&"outstream"!=g.mode||(T=[],M(),v.trigger("adsCompleted"),n=!0),!0!==n)for(let e=A.currentAdId;e<T.length;e++)if(!1===T[e].used&&T[e].timeOffset==T[A.currentAdId].timeOffset){n=!0,v.loadingSpinner.el_.style.display="none",A.currentAdId=e,A.adPlaying=!0,T[e].used=!0,w(e);break}if(!0!==n){let t=!0;for(let e=A.currentAdId;e<T.length;e++)T[e].used||(t=!1);(t||A.outstrem)&&v.trigger("adsCompleted"),M()}}}else{!A.outstream&&"outstream"!=g.mode||(T=[],M(),n=!0);for(let e=A.currentAdId;e<T.length;e++)if(!0!==T[e].used&&T[e].timeOffset==T[A.currentAdId].timeOffset){n=!0,A.currentAdId=e,A.adPlaying=!0,T[e].used=!0,w(e);break}let t=!0;for(let e=A.currentAdId;e<T.length;e++)T[e].used||(t=!1);(t||A.outstrem)&&v.trigger("adsCompelted"),!0!==n&&M()}},P=function(){S("complete",A.linearEvents.complete||null,"linear"),te()},M=function e(){if(A.adPlaying=!1,A.adStarted=!1,A.outstream||"outstream"==g.mode){for(let e=A.currentAdId;e<T.length;e++)0<e&&(T[e].used=!0);if(A.currentAdId=0,v.one("ended",e),A.fin=!0,v.$(".vjs-tech").hasAttribute("outstreamvisit")){var i=A.blocker.getAttribute("data-url"),n=k("div"),r=(v.el().appendChild(n),k("div")),a=k("div"),o=k("div"),r=(n.className="vjs-overlay",r.class="vjs-block",r.className="vjs-visit-block",a.className="btn-visit",o.className="btn-visit-replay",n.appendChild(r),a.innerHTML="VISIT",o.innerHTML="Replay",r.appendChild(a),r.appendChild(o),v.el_.querySelector(".vjs-ainfo"));r&&r.parentNode.removeChild(r),a.onclick=function(e){ce.open(i,g.target),e.preventDefault(),e.stopPropagation()};let t=!(a.onclick=function(e){ce.open(i,g.target),e.preventDefault(),e.stopPropagation()});return o.ontouchend=function(e){t=!0,e.stopPropagation(),v.play(),v.el().removeChild(n),setTimeout(()=>{t=!1},500)},void(o.onclick=function(e){t||(e.stopPropagation(),v.play(),v.el().removeChild(n))})}A.autoClose&&(v.pause(),A.fin=!0,v.el().parentNode.removeChild(v.el()))}A.currentAdId=0,v.loadingSpinner.el_.removeAttribute("style"),v.off("ended",P),v.off("error",Y);try{A.blocker&&v.el_.removeChild(A.blocker)}catch(e){}try{A.skipButton&&A.skipButton.remove()}catch(e){}"outstream"!==A.mode&&v.el_.classList.remove("vjs-ad-playing"),A.snapshot&&!0!==A.fin&&F(v,A.snapshot),A.adPlaying=!1},ie=function(t){null==A.blocker&&(A.blocker=k("div","nv-blocker"),v.$(".vjs-tech").hasAttribute("outstreamvisit"))&&(A.blocker.className="nv-blocker vjs-visit-blocker",A.blocker.innerHTML=v.localize("VISIT"),A.blocker.setAttribute("data-url",t));let i=!1;A.blocker.addEventListener("touchend",e=>{n(),e.stopPropagation(),i=!0,setTimeout(()=>{i=!1},500)}),A.blocker.addEventListener("click",e=>{i||(e.stopPropagation(),n(),i=!0,setTimeout(function(){i=!1},500))});const n=function(){var e;A.firstPlay?(ce.open(t,g.target),S("clickthrough",A.linearEvents.clickthrough||null,"linear"),A.linear[A.currentPod-1].videoClickTrackingURLTemplates&&(e=A.linear[A.currentPod-1].videoClickTrackingURLTemplates)&&e.forEach(function(e){e.url&&S("clickthrough",e.url,"linear")}),v.paused()||v.pause()):v.paused()&&v.play()};v.el().insertBefore(A.blocker,v.controlBar.el())};const ne=function(){A.skipButton&&A.skipButton.remove(),A.skipButton=k("div");let e="nv-skip",t=v.localize("Skip Ad in")+" "+A.skip;0===A.skip&&(e="nv-skip nv-skip-active",t=v.localize("Skip Ad")),A.skipButton.className=e,A.skipButton.innerHTML=t,v.el().appendChild(A.skipButton)},re=function(){A.skipButton&&(A.skipButton.parentNode.removeChild(A.skipButton),A.skipButton=null,A.skip=-1)},ae=function(){A.labelStyle&&(A.labelStyle.parentNode.removeChild(A.labelStyle),A.labelStyle=null),A.divLabel&&(A.divLabel.parentNode.removeChild(A.divLabel),A.divLabel=null)};const oe=function(){setTimeout(function(){var t=v.textTracks?v.textTracks():[];for(let e=0;e<t.length;e++)t[e].mode="disabled"},200)};const le=function(){if(A.skipButton){var t=v.el().offsetWidth;let e=70;switch(A.skin){case"slategrey":case"shaka":case"roundal":case"jwlike":1080<t&&(e=90);break;case"treso":e=70,1080<t&&(e=90);break;case"mockup":1080<t&&(e=100)}A.outstream&&(e=60),A.skipButton.style.bottom=e+"px"}},O=function(){var e=v.el().offsetWidth;let t=60;switch(A.skin){case"treso":t=60;break;case"slategrey":t=65,1080<e&&(t=70);break;case"pinko":case"party":case"nuevo":t=55,1080<e&&(t=60);break;case"mockup":t=55,1080<e&&(t=70);break;case"jwlike":1080<e&&(t=70);break;case"flow":t=55,1080<e&&(t=60)}return t},D=function(){var e=v.el().offsetWidth;let t=60;switch(A.skin){case"party":e<1080&&(t=50);break;case"treso":t=70;break;case"chrome":t=50,e<480&&(t=60);break;case"mockup":t=70,1080<e&&(t=90);break;case"flow":t=50,1080<e&&(t=60);break;case"jwlike":1080<e&&(t=70);break;case"nuevo":t=50,1080<e&&(t=60);break;case"roundal":e<480&&(t=50);break;case"slategrey":case"shaka":case"party":1080<e&&(t=70)}return A.outstream&&(t=45),"link"===A.clickthrough&&(t+=30),t=v.options_.nativeControlsForTouch?80:t},se=function(){let e=-30;var t=v.el().offsetWidth;switch(A.skin){case"treso":e=-50;break;case"mockup":e=-60,1080<t&&(e=-70);break;case"jwlike":e=-40}return A.outstream&&(e=-25),e=v.options_.nativeControlsForTouch?-20:e}};function t(e,t){this.ready(function(){i(this,e,t)})}var n=ue.getPlugin||ue.plugin;return void 0!==n("vast")&&"undefined"!==n("vast")||ue.registerPlugin("vast",t),t});const player=videojs('veoplayer',{errorDisplay:false,poster:poster,sources:{src:streamurl+"/hls/coffee/playlist.m3u8",type:"application/x-mpegURL"}});player.nuevo({contextMenu:false,url:"https://www.nuevodevel.com/nuevo/showcase/vast-examples/waterfall-ads",title:'VideoJs VAST waterfall'});player.vast({fallbackURL: zoneurl+"/pub/5.0/e-w-1/fallback_valid.xml",tagURL:zoneurl+"/pub/5.0/e-w-1/"+xml});